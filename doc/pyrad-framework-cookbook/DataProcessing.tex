\RequirePackage{ifpdf}
\ifpdf
   \documentclass[a4paper,11pt,pdftex,twoside]{scrartcl}
\else
   \documentclass[a4paper,11pt,dvips,twoside]{scrartcl}
\fi

% ------------------------------------------------------------------------------
% Include packages
% ------------------------------------------------------------------------------
\ifpdf
   \usepackage[pdftex]{color}
   \usepackage[final,pdftex]{graphicx} % Einbinden von Gaphiken, flexibler als package {graphics}
\else
   \usepackage[dvips]{color}
   \usepackage[final,dvips]{graphicx}
\fi
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}  % Ermöglicht die Verwendung von UTF8 Zeichensätzen
                             % und damit der direkten Eingabe von "deutschen" Sonderzeichen, d.h. z.B. Umlaute.
\usepackage[T1]{fontenc}
\usepackage{caption}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage[table]{xcolor}
\usepackage{xspace}   % \xspace
\usepackage{float}    % {table}[H]
\usepackage{lscape}   % {landscape}
\usepackage[left=2cm,right=2cm,top=1cm,bottom=1cm,includeheadfoot]{geometry}
\usepackage{hyperref}
\usepackage{enumitem}

\hypersetup{
  linktocpage,
  colorlinks=true,
  linkcolor=blue,
}

% PAGE LAYOUT
%\setlength{\topmargin}{-1cm}
%\setlength{\headheight}{0cm}
%\setlength{\headsep}{0cm}
%\setlength{\textheight}{\paperheight}
%\addtolength{\textheight}{-1in}

\setlength{\oddsidemargin}{0.1cm}
\setlength{\evensidemargin}{\oddsidemargin}
\setlength{\textwidth}{\paperwidth}
\addtolength{\textwidth}{-2in}
\addtolength{\textwidth}{-1.8\oddsidemargin}

% new commands
\newcommand{\superscript}[1]{\ensuremath{^{\textrm{#1}}}}
\newcommand{\subscript}[1]{\ensuremath{_{\textrm{#1}}}}

\renewcommand{\th}[0]{\superscript{th}}
\newcommand{\st}[0]{\superscript{st}}
\newcommand{\nd}[0]{\superscript{nd}}
\newcommand{\rd}[0]{\superscript{rd}}

\newcommand{\celsius}{$^{\circ}\mathrm{C}$\xspace}
\newcommand{\degree}{$^{\circ}$\xspace}

\newcommand{\dir}{\emph}
\newcommand{\cmdname}{\emph}

\renewcommand{\bf}{\normalfont \bfseries}

% Color defintions
\definecolor{darkgray}{rgb}{0.85,0.85,0.85}
\definecolor{lightgray}{rgb}{0.95,0.95,0.95}

% alternate rowcolors for all long-tables
%\let\oldlongtable\longtable
%\let\endoldlongtable\endlongtable
%\renewenvironment{longtable}{\rowcolors{2}{darkgray}{lightgray}\oldlongtable} {
%\endoldlongtable}

% ============================================================================
% Define Titlepage
% ============================================================================
%\subject{}
\title{
  \begin{center}
    \vspace{-10mm}
    \rule{0.9\textwidth}{0.5pt}
    \vspace{7mm}
    {\bf \huge Meteorological Support for MALSplus}\\[10mm]
    {\bf \huge Data Processing Cookbook}\\
    \vspace{-3mm}
    \rule{0.9\textwidth}{0.5pt}
  \end{center}
}
%\author{Andreas Leuenberger}
\date{}
%\publishers{\vspace{20mm}}  % Abused to separate title from abstract
\titlehead{
  \vspace{-10mm}
  \hspace*{0cm}
  \includegraphics[width=1.0\textwidth]{./figures/titlebar.pdf}\\[20mm]
  \vspace{0mm}
  \hspace{0mm}
}

% ============================================================================

\begin{document}

% ----------------------------------------------------------------------------
% Make titlepage
% ----------------------------------------------------------------------------
\maketitle
\thispagestyle{empty} % No headers, no page numbers
% Include title picture
%\vspace{-20mm}
%\begin{figure}[htbp]
%  \begin{center}
%    \includegraphics[width=0.7\columnwidth]{images/dx50_small}
%    \caption*{Wetterradar DX50}
%  \end{center}
%\end{figure}
%\vspace{20mm}
\vfill
Version: 0.3.0\\
Date: October, 18, 2017
\clearpage

% ----------------------------------------------------------------------------
% Version control page
% ----------------------------------------------------------------------------

\thispagestyle{empty} % No headers, no page numbers

\section*{Document History}

\subsection*{Responsible People}
\begin{table}[H]
\begin{center}
\begin{tabularx}{\textwidth}{|l|X|}
  \hline
  Creation/Edition        & J.~Grazioli\\ \hline
  Revision                & \\  \hline
  Approval                & \\  \hline
  Further information     & Document editors\\  \hline
\end{tabularx}
\end{center}
\end{table}

\subsection*{Versionenkontrolle}
%\begin{tabularx}{\textwidth}{|l|l|l|X|}
\begin{longtable}{|p{0.08\textwidth}|p{0.17\textwidth}|p{0.12\textwidth}|p{0.52\textwidth}|}

  \hline
  {\bf Version} & {\bf Edited by}         & {\bf Date}  & {\bf Activity}\\
  \hline
  \endfirsthead

  \multicolumn{4}{l}%
  {\textit{Continued from previous page}}\\
  \hline
  {\bf Version} & {\bf Edited by}         & {\bf Date}  & {\bf Activity}\\
  \hline
  \endhead

  \hline
  \multicolumn{4}{r}{\textit{Continued on next page}}\\
  \endfoot

  \hline
  \endlastfoot

  0.2.0         & J.~Grazioli    & 2017-08-23  & Creation begun \\ \hline
  0.3.0         & J.~Grazioli    & 2017-10-18  & check products section \\ \hline
 
\end{longtable}

\clearpage

% ----------------------------------------------------------------------------
% Table of content
% ----------------------------------------------------------------------------

\thispagestyle{empty} % No headers, no page numbers
\tableofcontents
\clearpage


%\pagestyle{plain} % No headers, just page numbers
\pagenumbering{arabic} % Roman numerals
\setcounter{page}{1}   % Start page numbering

% ----------------------------------------------------------------------------
% Introduction
% ----------------------------------------------------------------------------
\section{Introduction}

\subsection{Motivation for Separating Code and Configuration}
\begin{itemize}
  \item A future ''final'' version of the code should not be touched.
  \item Clear change and versioning control of the code.
  \item No local file paths and personal settings in the code.
  \item Developing and test can be done using local config files.
  \item Parameters are not hard coded and can be changed easily.
  \item High flexibility. All settings are made by changing only 1--3
    config files.
\end{itemize}

\subsection{Rationale and other sources of information}
The processing is based on the PyRad framework. \underline{Usually} pyrad is cloned in the home directories of each users in the appropriate servers. As an example, for zueub222 and user jgr:

\begin{verbatim}
jgr@zueub222:pyrad$ pwd
/home/lom/users/jgr/pyrad
\end{verbatim} 

The purpose of this document is to allow users to process data by manipulating only configuration files. The focus is therefore here on the processing output and not on PyRad itself. For an overview of the functionalities of PyRad, its installation, and development, please refer to the documentation available at:

\begin{verbatim}
pyrad/doc/
\end{verbatim}



% ----------------------------------------------------------------------------
% Data Processing
% ----------------------------------------------------------------------------
\newpage
\section{Data Processing}

\subsection{Data Processing}
The information about this section is complementary to Sec.~2 of the document:

\begin{verbatim}
   pyrad/doc/pyrad_user_manual.docx
\end{verbatim}


The data processing can be started from the linux shell, after activation of the proper conda environment. Depending on the server, the appropriate environment may be  ``root'' (i.e. for zueub222):

\begin{verbatim}
jgr@zueub222:~$ source activate root
(root) jgr@zueub222:~$ 
\end{verbatim}

\noindent
or it can be ``pyrad'' (i.e. for CSCS and cirrus servers).
The python scripts used to process the radar data can be called from the directory:

\begin{verbatim}
pyrad/src/pyrad_proc/scripts/
\end{verbatim}

\noindent
The scripts that are useful for this document are the following processing and realtime scripts:
\begin{itemize}
   \item main\_process\_data.py
   \item main\_process\_data\_rt.py
   \item main\_process\_data\_period.py
   \item process\_trajectory.py
\end{itemize}
they can all be called from the linux shell.

\subsubsection{Process data real time (main\_process\_data\_rt.py)}
This script is designed to process data in real time. The main feature that makes him real-time is the capability of ``listening'' some data folders and immediately process new data se they appear.
Verbatim, from the help page of the script:
\begin{verbatim}
This program performs real time processing of the data

To run the processing framework type:
    python main_process_data.py [config_files] 
     --starttime [process_start_time] --endtime [process_end_time] 
     --cfgpath [cfgpath] --proc_period [proc_period]

If startime or endtime are specified the program will start processing at the
specified time and end at the specified time. Otherwise the program ends when
the user interrupts it.
cfgpath is an optional argument with default: '$HOME/pyrad/config/processing/'
proc_period is the time that has to pass before attempting to restart the
processing in s
if proc_finish is not none it indicates the time the program is allowed to ran
berfore forcing it to end


Example:
    python main_process_data.py 'paradiso_fvj_vol.txt' 'paradiso_fvj_rhi.txt' 
    --starttime '20140523000000' --endtime '20140523001000' 
    --cfgpath '$HOME/pyrad/config/processing/' --proc_period 60 --proc_finish 120


usage: main_process_data_rt.py [-h] [--starttime STARTTIME]
                               [--endtime ENDTIME] [--cfgpath CFGPATH]
                               [--proc_period PROC_PERIOD]
                               [--proc_finish PROC_FINISH]
                               cfgfiles [cfgfiles ...]

Entry to Pyrad processing framework

positional arguments:
  cfgfiles              name of main configuration file

optional arguments:
  -h, --help            show this help message and exit
  --starttime STARTTIME
                        starting time of the data to be processed. Format
                        YYYYMMDDhhmmss
  --endtime ENDTIME     end time of the data to be processed. Format
                        YYYYMMDDhhmmss
  --cfgpath CFGPATH     configuration file path
  --proc_period PROC_PERIOD
                        Period between processing rounds (s)
  --proc_finish PROC_FINISH
                        Processing time allowed before shutdown (s)

\end{verbatim}

{\bf TODO: explain better the last two parameters -jgr- -fvj-}

\subsubsection{Process data (main\_process\_data.py)}
Stadard data processing (i.e., usually non real time) is performed by this script.
Verbatim from the help page:

\begin{verbatim}
This program processes and post-processes data over a time span

To run the processing framework type:
    python main_process_data.py [config_file] --starttime [process_start_time] --endtime
     [process_end_time] --postproc_cfgfile [postproc_config_file] --cfgpath [cfgpath]

If startime and endtime are not specified the program determines them from
the trajectory file or the last processed volume.
postproc_cfgfile is an optional argument with default: None
cfgpath is an optional argument with default: '$HOME/pyrad/config/processing/'

Example:
    python main_process_data.py 'paradiso_fvj_vol.txt' --starttime '20140523000000' 
    --endtime '20140523001000' --postproc_cfgfile 'paradiso_fvj_vol_postproc.txt' --cfgpath
     '$HOME/pyrad/config/processing/'


usage: main_process_data.py [-h] [--starttime STARTTIME] [--endtime ENDTIME]
                            [--postproc_cfgfile POSTPROC_CFGFILE]
                            [--cfgpath CFGPATH] [-i INFOSTR] [-t TRAJFILE]
                            proc_cfgfile

Entry to Pyrad processing framework

positional arguments:
  proc_cfgfile          name of main configuration file

optional arguments:
  -h, --help            show this help message and exit
  --starttime STARTTIME
                        starting time of the data to be processed. Format
                        YYYYMMDDhhmmss
  --endtime ENDTIME     end time of the data to be processed. Format
                        YYYYMMDDhhmmss
  --postproc_cfgfile POSTPROC_CFGFILE
                        name of main post-processing configuration file
  --cfgpath CFGPATH     configuration file path
  -i INFOSTR, --infostr INFOSTR
                        Information string about the actual data processing
                        (e.g. 'RUN57'). This string is added to the filenames
                        of the product files.
  -t TRAJFILE, --trajfile TRAJFILE
                        Definition file of plane trajectory. Configuration of
                        scan sector, products, ...


\end{verbatim}

\subsubsection{Process data (main\_process\_data\_period.py)}
This script is used in post-processing to process data over long periods of time, usually several days.
According to its help entry:
\begin{verbatim}
This program does the daily processing and post-processing over a period of time.

To run the processing framework type:
    python main_process_data.py [config_file] [process_start_date] [process_end_date] 
    --starttime [process_start_time] --endtime [process_end_time] --postproc_cfgfile
     [postproc_config_file] --cfgpath [cfgpath]

starttime is an optional argument with default: '000000'
endtime is an optional argument with default: '235959'
postproc_cfgfile is an optional argument with default: None
cfgpath is an optional argument with default: '$HOME/pyrad/config/processing/'

Example:
    python main_process_data.py 'paradiso_fvj_vol.txt' '20140523' '20140525' 
    --starttime '000000' --endtime '001000' --postproc_cfgfile 'mals_emm_vol_postproc.txt' 
    --cfgpath '$HOME/pyrad/config/processing/'


usage: main_process_data_period.py [-h] [--starttime STARTTIME]
                                   [--endtime ENDTIME]
                                   [--postproc_cfgfile POSTPROC_CFGFILE]
                                   [--cfgpath CFGPATH]
                                   proc_cfgfile startdate enddate

Entry to Pyrad processing framework

positional arguments:
  proc_cfgfile          name of main configuration file
  startdate             starting date of the data to be processed. Format
                        YYYYMMDD
  enddate               end date of the data to be processed. Format YYYYMMDD

optional arguments:
  -h, --help            show this help message and exit
  --starttime STARTTIME
                        starting date of the data to be processed. Format
                        hhmmss
  --endtime ENDTIME     end date of the data to be processed. Format hhmmss
  --postproc_cfgfile POSTPROC_CFGFILE
                        name of main post-processing configuration file
  --cfgpath CFGPATH     configuration file path

\end{verbatim}

{\bf TODO: explain better why this script is needed, conceptually. It seems very similar to the main\_process\_data one}

\subsubsection{Process trajectories (process\_trajectory.py)}
This script is used in post-processing to process trajectory data. IT is therefore often used in the
days/weeks following a flight test or a RTS test.
The usage of this script is:

\begin{verbatim}
usage: process_trajectory.py [-h] [-c CFGFILE]
                             [--preproc_cfgfile PREPROC_CFGFILE] [-i INFOSTR]
                             trajfile [starttime] [endtime]

Create PYRAD products using a plane trajectory

positional arguments:
  trajfile              Definition file of plane trajectory. Configuration of
                        scan sector, products, ...
  starttime             Starting time of the data to be processed. Format:
                        YYYYMMDDhhmm[ss]. If not given, the time of the first
                        sample is used.
  endtime               End time of the data to be processed. Format:
                        YYYYMMDDhhmm[ss]. If not given, the time of the last
                        sample is used.

optional arguments:
  -h, --help            show this help message and exit
  -c CFGFILE, --cfgfile CFGFILE
                        Main configuration file. Defines the
  --preproc_cfgfile PREPROC_CFGFILE
                        name of main pre-processing configuration file
  -i INFOSTR, --infostr INFOSTR
                        Information string about the actual data processing
                        (e.g. 'RUN57'). This string is added to the filenames
                        of the product files.

Example:
  process_trajectory.py -c $HOME/pyrad/config/processing/mals_emm_rw22_traj.txt
     --preproc_cfgfile $HOME/pyrad/config/processing/mals_emm_rw22_traj_preproc.txt
     -i TS011 /data/mals_plane_traj/EMM/gnv_20161026_ts011_seat_emmen_flt01_ADS.txt

\end{verbatim}

% ----------------------------------------------------------------------------
% Configuration
% ----------------------------------------------------------------------------
\newpage
\section{Configuration}
\label{sec_configuration}

The configuration of the data processing is divided into three files. The
\emph{main configuration file} (see Section~{\ref{subsec_main_config}),
the \emph{location configuration file} (see Section~{\ref{subsec_location_config})
describing the location of the weather radar and the used scans.
The \emph{product configuration file} describes the datasets and products. As this
is bit more complicated it is described in its own Section~{\ref{sec_products}.

The configuration files are located in \dir{malsgit/config\_pyrad/processing/}.




\subsection{Main Configuration File}
\label{subsec_main_config}
Tha main configuration file is used to define the global settings, notably the paths to the different sources of data.
The parameters of the main configuration file are described in
Table~\ref{tab_main_config_params}

\begin{longtable}{p{0.20\textwidth}p{0.10\textwidth}p{0.60\textwidth}}
\caption{Configuration parameters of the main configuration file}\\
\label{tab_main_config_params}

\bf{Name}          & \bf{Type} & \bf{Description}\\
\hline
\endfirsthead

\multicolumn{3}{c}%
{\tablename\ \thetable\ -- \textit{Continued from previous page}}\\
\bf{Name}          & \bf{Type} & \bf{Description}\\
\hline
\endhead

\hline
\multicolumn{3}{r}{\textit{Continued on next page}}\\
\endfoot

\hline
\endlastfoot

name               & STRING    & Name of the data processing. This name is used
                                 in the path of the saved products in the following manner:
                                 <saveimgbasepath>/<name>/<YYYY-MM-DD>/<datasetname>/<prodname>/
                                 <outputname>\\
datapath           & STRING    & Base directory of the rainbow raw data. This field
                                 must have a trailing '/'. The raw data files of a scan
                                 can be found using the following file path:\\
                   &           & <datapath>/<scanname>/<YYYY-MM-DD>/<YYYYMMDDHHMMSS00datatype>.<ext>\\
psrpath            & STRING    & Base directory of the power spectrum (psr) raw files. By default:
                                 empty string\\
iqpath             & STRING    & Base directory of the IQ data files. By default: empty string\\
configpath         & STRING    & Base directory of the configuration files. This directory
                                 contains clutter maps, filter coefficients, antenna pattern,
                                 and the data processing configuration files.\\
cosmopath          & STRING    & Base directory of the COSMO data files.\\
dempath            & STRING    & Base directory of the Digital Elevation Model (DEM) files.
                                 Basically to load the radar visibility (Optional)\\
smnpath            & STRING    & Base directory of the SwissMetNet stations data. Used in the
                                 comparison between radar data and rain gauges (Optional)\\
disdropath         & STRING    & Base directory of the disdrometer data. Used in the comparison
                                 between radar data and disdrometers (Optional)\\
solarfluxpath      & STRING    & Base directory of the solar flux data. Used to plot the calibration
                                 bias based on sun monitoring (Optional)\\
rad4alppath        & STRING    & Base directory of the averaged reflectivity of the rad4alp radars.
                                 Used in the inter-comparison between radars (Optional)\\
rad4alprawpath     & STRING    & Base directory of raw rad4alp radars data. Used in the inter-comparison
                                 between radars (Optional)\\
statuspgr          & STRING    & path to program that reads rad4alp status files. Used in the
                                 calculation of the radar noise (Optional)\\
mapspath           & STRING    & path to directory where background maps are stored. Used in the
                                 plotting of PPI and CAPPI data (Optional)\\
mxpolname          & STRING    & Name of the directory where MXPOL processed data is stored. Used in
                                 the inter-comparison between radars (Optional)\\
mxpolrawname       & STRING    & Name of the directory where MXPOL raw data is stored. Used in the
                                 inter-comparison between radars (Optional)\\
locationConfigFile & STRING    & File name (with full path) of the location configuration file.\\
                   &           & Described in Section~\ref{subsec_location_config}.\\
productConfigFile  & STRING    & File name (with full path) of the product configuration file.\\
                   &           & Described in Section~\ref{sec_products}.\\
lastStateFile      & STRING    & File name (with full path) of the file containing the time
                                 of the last processed scan. Used in particular for real time
                                  processing.\\
saveimg            & INT       & Set to 1, if all generated images shall be written to a file.
                                 If set to 0, the graphical output is displayed on screen and
                                 not saved.\\
imgformat          & STRING    & File format of the images. The following formats are supported:
                                 eps, png and jpg ({\bf TODO: check if applicable -jgr- -fvj-}). If \emph{saveimg} is set to 0, this field is
                                 not used.\\
saveimgbasepath    & STRING    & Base directory for the images to save. The directory structure
                                 looks as follows:
                                 <saveimgbasepath>/<name>/<YYYY-MM-DD>/<datasetname>/<prodname>/
                                 <outputname>
                                 If \emph{saveimg} is set to 0, this field is not used.\\
loadbasepath       & STRING    & OPTIONAL. Base path of saved data. By default, this field is set to
                                 \emph{saveimgbasepath}.\\
loadname           & STRING    & OPTIONAL. Name of the saved data processing. Used for saved volume loading.
                                 By default, this field is set to \emph{name}.\\
\end{longtable}

{\bf TODO: discuss together -jgr- -fvj- to see which entry should i add or remove}


\subsection{Location Configuration File}
\label{subsec_location_config}

The location configuration files describes some parameters that are depending on the specific location of a radar (type of scans we want to measure, radar name, etc ). The location of the weather
radar (its position) itself, is instead usually read from the radar metadata directly and it is not necessarily defined in this file.
The fields are described in Table~\ref{tab_location_config_params}.

\begin{longtable}{p{0.23\textwidth}p{0.10\textwidth}p{0.57\textwidth}}
\caption{Configuration parameters of the location configuration file}\\
\label{tab_location_config_params}
\bf{Name}          & \bf{Type} & \bf{Description}\\
\hline
\endfirsthead

\multicolumn{3}{c}%
{\tablename\ \thetable\ -- \textit{Continued from previous page}}\\
\bf{Name}          & \bf{Type} & \bf{Description}\\
\hline
\endhead

\hline
\multicolumn{3}{r}{\textit{Continued on next page}}\\
\endfoot

\hline
\endlastfoot

RadarName      & STRING    & Short version name of a rad4alp radar (i.e. A, D, L, P) or DX50, MXPol for the X-band radars.\\
RadarRes      & STRING    & rad4alp radar resolution (H or L). Only necessary if rad4alp data is processed\\

RadarBeamwidth & FLOAT & Radar antenna beam width [Deg]\\
AntennaGaindB & FLOAT & antenna gain [dB]\\
ScanList           & STRARR    & A list with the scans used for this data processing.
                                 Note that the first scan in this list is used as master scan.
                                 The master scan must be the first (temporal) scan of the
                                 corresponding rainbow task. In case of composite volumes the master scan is usually a PPI and the following are RHIs. If the radar processed is rad4alp the scan list consists of the radar elevation (i.e. from 001 to 020).\\
                   &           & All scan names must have a trailing '/' except if rad4alp data is processed\\
%compose\_volume    & INT       & Boolean (defaul 0/NO). If 1, the volumes of the ScanList are composed to form a COMPOSITE\_VOLUME dataset (See~\ref{subsec_composite_volume_dataset})\\
ScanPeriod         & FLOAT     & Repetition period of each scan in minutes.\\
Azimtol            & FLOAT     & Tolerance in azimuth for irregular data. (0.5 is a good value)\\
clutterMap         & STRING    & Clutter map of the data processing. The clutter map is
                                 located at <configpath>/clutter/<clutterMap>\\
iso0setup          & STRUCT    & Setup to read the iso zero height from cosmo model.\\
$\quad$ xcoord     & STRING    & CH1903 X-coordinate of the radar position [km].\\
$\quad$ ycoord     & STRING    & CH1903 Y-coordinate of the radar position [km].\\
CosmoRunFreq & INT &  Frequency of a COSMO model run in hours.\\
CosmoForecasted & INT & Hours forecasted by the COSMO model.\\
RcovFile           & STRING    & Name (without path) of the R-coefficients for the Kalman
                                 filtering. This file and path must be
                                 <configpath>/filter/<RcovFile>\\
PcovFile           & STRING    & Name (without path) of the P-coefficients for the Kalman
                                 filtering. This file and path must be
                                 <configpath>/filter/<PcovFile>\\
IQWindow & STRING & Possible values: HAMMING, HANNING, BLACKMAN, NONE. Default NONE. When processing IQ data, window type applied before computing the spectrum.\\
Clipping & FLOAT & Default 0. In spectral processing: dB above noise level below which the spectra is clipped. If 0 no clipping is applied\\
SWindow & INT & Default 0. In spectral processing: Size (in Doppler cells) of the Gaussian smoothing window used to smooth the Doppler spectrum. If 0 no smoothing is applied.\\
Average & INT & Boolean: 0,1. Default 0. Flag indicating whether the Doppler of a volume have to be averaged or not. A single PRF is assumed to perform the average.\\
ppiImageConfig     & STRUCT    & Structure defining the PPI image generating. The following 6
                                 fields are described below:\\
rhiImageConfig     & STRUCT    & Structure defining the RHI image generating. The following 6
                                 fields are described below:\\
$\quad$ xsize      & INT       & Number of horizontal pixels of the picture (without frame).\\
$\quad$ ysize      & INT       & Number of vertical pixels of the picture (without frame).\\
$\quad$ xmin       & FLOAT     & Distance of the left image boundary to the radar in km.\\
$\quad$ xmax       & FLOAT     & Distance of the right image boundary to the radar in km.\\
$\quad$ ymin       & FLOAT     & Distance of the lower image boundary to the radar in km.\\
$\quad$ ymax       & FLOAT     & Distance of the upper image boundary to the radar in km.\\

ppiMapImageConfig     & STRUCT & Structure defining the PPI image overlayed on a map. The following 9 fields are described below:\\
$\quad$ rngRing  & FLOAT      & Distance between range rings (0 means no range ring) [km].\\
$\quad$ xsize    & FLOAT      & Image size (inches) [ich].\\
$\quad$ ysize    & FLOAT      & Image size [ich].\\
$\quad$ lonmin   & FLOAT      & Minimum WGS84 longitude [$^\circ$].\\
$\quad$ lonmax   & FLOAT      & Maximum WGS84 longitude [$^\circ$].\\
$\quad$ latmin   & FLOAT      & Minimum WGS84 latitude [$^\circ$].\\
$\quad$ latmax   & FLOAT      & Maximum WGS84 latitude [$^\circ$].\\
$\quad$ mapres   & STRING     & Map resolution. Accepted strings are: ``10m'', ``50m'', ``110m'' \\
$\quad$ maps     & STRARR     & String array of possible maps to overplot. Accepted entries include: 
                                relief, countries, provinces, urban\_areas, roads, railroads, 
                                coastline, lakes, lakes\_europe, rivers, rivers\_europe   \\



rvsazImageConfig     & STRUCT    & Structure defining the range versus azimuth image. The following 4 fields are described below:\\
$\quad$ xmin       & FLOAT     & Min angle on horizontal axis [Deg].\\
$\quad$ xmax       & FLOAT     & Max angle on horizontal axis [Deg].\\
$\quad$ ymin       & FLOAT     & Min range on vertical axis [km].\\
$\quad$ ymax       & FLOAT     & Max range on vertical axis [km].\\

rvselImageConfig     & STRUCT    & Structure defining the range versus elevation image. It contains the same 4 fields as rvsazImageConfig.\\

sunhitsImageConfig     & STRUCT    & Structure defining the sun hits image. The following 6 fields are described below:\\
$\quad$ xsize      & INT      & Number of horizontal pixels of the picture (without frame).\\
$\quad$ ysize      & INT    & Number of vertical pixels of the picture (without frame).\\
$\quad$ xmin      & FLOAT  & Minimum azimuth angle difference (between sun and radar).\\
$\quad$ xmax     & FLOAT  & Maximum azimuth angle difference (between sun and radar).\\
$\quad$ ymin      & FLOAT  & Minimum elevation angle difference (between sun and radar).\\
$\quad$ ymax     & FLOAT  & Maximum azimuth angle difference (between sun and radar).\\

wgs84ImageConfig     & STRUCT    & Structure defining the image in WGS84 coordinates. The following 6 fields are described below:\\
$\quad$ north    & FLOAT     & North limit of image [deg].\\
$\quad$ south    & FLOAT    & South limit of image [deg].\\
$\quad$ east    & FLOAT      & East limit of image [deg].\\
$\quad$ west     & FLOAT      & West limit of image [deg].\\
$\quad$ dlat      & FLOAT      & latitude resolution [deg].\\
$\quad$ dlon     & FLOAT      & longitude resolution [deg].\\

ch1903ImageConfig     & STRUCT    & Structure defining the image in Swiss coordinates. The following 6 fields are described below:\\
$\quad$ north    & FLOAT     & North limit of image [m].\\
$\quad$ south    & FLOAT    & South limit of image [m].\\
$\quad$ east    & FLOAT      & East limit of image [m].\\
$\quad$ west     & FLOAT      & West limit of image [m].\\
$\quad$ dchx     & FLOAT      & chx resolution [m].\\
$\quad$ dchy     & FLOAT      & chy resolution [m].\\



par\_azimuth\_antenna & STRUCT & Structure defining the PAR azimuth antenna. It contains the
                                 following 3 fields:\\
par\_elevation\_antenna &STRUCT& Structure defining the PAR elevation antenna. It contains the
                                 following 3 fields:\\
$\quad$ azPatternFile & STRING & Name of the azimuth pattern file of the antenna. This file and
                                 path must be
                                 <configpath>/antenna/<azPatternFile>\\
$\quad$ elPatternFile & STRING & Name of the elevation pattern file of the antenna. This file and
                                 path must be
                                 <configpath>/antenna/<elPatternFile>\\
$\quad$ fixed\_angle  & FLOAT  & Fixed angle of a PAR antenna in degrees. For the PAR azimuth
                                 antenna this is the elevation angle. For the elevation antenna
                                 is is the azimuth angle.\\
RAINBOW\-OLDMERGE    & INT     & OPTIONAL. If set, uses the old method to read the elevation angles from a
                                 raw rainbow file. This method just uses the elevation start angle.
                                 The new version take the mean between start and end elevation angle.\\
RAINBOW\-SECTORMERGE & INT     & OPTIONAL. Special method to merge the PPI's of a sector volume scan. Because
                                 the start and end azimuth angles of different PPI slices of a
                                 non-360 degrees volume scan do not correspond very well.\\
\end{longtable}

{\bf TODO: help needed here to define the complete list for pyrad and see what to remove -jgr -fvj-}

\newpage

% ----------------------------------------------------------------------------
% Product Generation Configuration
% ----------------------------------------------------------------------------
\section{Product Generation Configuration}
\label{sec_products}

This section describes the product configuration.

\subsection{Basic Concept}

The concept is based on three stages: 1. input or raw data volume, 2. datasets
and 3. products.

The center point of the data processing is the dataset. A dataset can be
generated from one or more than one input data volumes (e.g. a rainrate dataset
uses 5 different raw data volume to be generated).

There are several different formats of a dataset. For example, a dataset can be a
volume, a trajectory, a volume composite or a time series.
Section~\ref{sec_datasets} summarizes the possible datasets.

From a dataset the products are generated. What products can be generated from
a dataset depends on the type (volume, volume composite, trajectory or
time series) of the dataset.

Figure~\ref{fig_main_concept} shows a schema of an example of the basic concept
of the product generation. From different input data a dataset
is generated and from this dataset m products are created.

\begin{figure}[htbp]
  \begin{center}
    \ifpdf
      \includegraphics[width=0.9\textwidth]{./figures/main_concept.pdf}
    \else
      \includegraphics[width=0.9\textwidth]{./figures/main_concept.eps}
    \fi
  \end{center}
  \caption{Basic concept for product generation from input (also called raw) data.}
  \label{fig_main_concept}
\end{figure}

The dataset types are described in Section~\ref{sec_datasets}
and the product types in Section~\ref{sub_products}


\subsection{The concept of processing level}

{\bf TODO: add explanation of concept of processing level -jgr- -fvj- }


\subsection{Input Volume Datatypes}

There are different group of input volume datatypes that can be read as input data
for a dataset. These groups are summarized in Table~\ref{tab_datatype_groups}. The possible volume datatypes for each datatype group are listed in Table~\ref{tab_datatypes}.

The specification of the datatype for a dataset is done by first writing the datatype
group, followed by a ':' and then the name of the datatype. If no ':' is given, it is
assumed that the datatype belongs to the group \emph{RAW}.
For a datatype from the group \emph{SAVED}, the dataset and product name must be
specified. This information is separated by ','.
Note that \emph{NETCDF} datatypes cannot be mixed with other datatypes.\\

\noindent
{\bf Caveat:} please do not mistake the input volume datatype with the dataset type (entry  ``type'' of the dataset structure)
\begin{verbatim}
<datasetname> STRUCT 2
   type     STRING <datasettype>
   datatype STRARR
      RAW:dBZ
      PSR:NhDBM
      COSMO:TEMP
      SAVED:RR_h,<olddataset>,<oldproduct>
\end{verbatim}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lX}
\bf{Group} & \bf{Description}\\
RAW       & Raw data generated by the DX50. Stored in rainbow data format.\\
PSR       & Power spectra data generated by the signal processor of the DX50.
            Stored in Gematronik file format.\\
IQ         & data based on IQ raw data. For the moment only from rad4alp radars. The data is stored in a binary format in a .dat file.\\
SAVED     & A dataset generated by this dataprocessing procedure. As additional
            information the dataset and the product name of the previous dataset
            must be specified. Stored in IDL file format.\\
COSMO     & Data created by COSMO. Converted to polar radar coordinates and
            stored in rainbow file format.\\
DEM     & Digital Elevation Model data (DEM). Basically visibility in rainbow file format\\
NETCDF    & External data in netcdf format.\\
NETCDFCOSMO    & COSMO data in netcdf format.\\
RAD4ALP & rad4alp data.\\
RAD4ALPDEM & rad4alp visibility data.\\
RAD4ALPCOSMO & a binary file with COSMO data for rad4alp processing.\\
PROC & indicates that the dataset is the result of the preprocessing of raw data. (i.e. it will be created on the fly).\\
PSRPROC & indicates that the dataset is the result of the preprocessing of psr data. (i.e. it will be created on the fly).\\
RAINBOW & rainbow data types. {\bf TODO: check this -jgr-}\\
\end{tabularx}
\caption{List of input volume datatype groups}
\label{tab_datatype_groups}
\end{table}

{\bf TODO: (1) check entries. -jgr- -fvj-. Isaw for example that in pyrad we could have ``RADAR001:CFRADIAL:...'' types. (2) check that all the entries make sense }

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lX}
\bf{Group} & \bf{Datatypes}\\
\hline
RAW       & dBZ, dBZv, dBuZ, dBuZv, V, Vv, Vu, Vvu, W, Wv, Wu, Wvu,
            KDP, uKDP, uKDPu, PhiDP, uPhiDP, uPhiDPu, RhoHV,
            RhoHVu, uRhoHV, L, ZDR, ZDRu, SQI, SQIv, SQIu, SQIvu, SNRh, SNRv, CDR\\
PSR       & NhADU, NvADU, NhDBM, NvDBM, PhADU, PvADU, PhDBM, PvDBM,
            PhDBZ, PvDBZ, ShADU\_HZ, ShADU\_MS, ShDBADU\_HZ, ShDBADU\_MS,
            ShDBM\_HZ, ShDBM\_MS, ShDBZ\_HZ, ShDBZ\_MS, SvADU\_HZ, SvADU\_MS,
            SvDBADU\_HZ, SvDBADU\_MS, SvDBM\_HZ, SvDBM\_MS, SvDBZ\_HZ, SvDBZ\_MS,
            UhADU\_HZ, UvADU\_HZ, UhADU\_MS, UvADU\_MS, UhCPX\_HZ, UvCPX\_HZ, \ldots\\
IQ        & Same as PSR plus WhADU, WvADU, WhDBADU, WvDBADU, WhDBM, WvDBM, WhDBZ, WvDBZ, IhCPX, IvCPX, IhRAW, IvRAW, IhADU, IvADU, IhDBADU, IvDBADU, IhDBM, IvDBM, IhDBZ, IvDBZ, IhDEG, IvDEG\\
SAVED     & (Some examples, not complete) dV, dVv, dVu, dVvu, RR\_Zh, RR\_Ah,
            RR\_Kdp, Att, SAN, TRAJ, HEIGHT, WP, WPDIFF, WPRELDIFF,
            dtfilter, RAINEXT, RCS\\
COSMO     & ISO0, TEMP\\
DEM         & VIS\\
NETCDF    &\\
NETCDFCOSMO    & ISO0, TEMP\\
RAD4ALP & dBZ, ZDR, RhoHV, uPhiDP, V, W, SNRh, SNRv, L, CDR.\\
RAD4ALPDEM & VIS.\\
RAD4ALPCOSMO & ISO0, TEMP\\
PROC & dBZc, dBZvc, ZDRc, PhiDPc, KDPc, RhoHVc, Ah, Adp.\\
PSRPROC & sZh\_MS, sZv\_MS, sZDR\_MS, sRhoHV\_MS, sPhiDP\_MS.\\
\end{tabularx}
\caption{List of possible datatypes}
\label{tab_datatypes}
\end{table}

{\bf TODO: check if those are up to date}

\subsection{Product Configuration File}

The product configuration files describes the products that are generated
for the data processing. The fields are described in
Table~\ref{tab_product_config_params}.

\begin{longtable}{p{0.20\textwidth}p{0.10\textwidth}p{0.60\textwidth}}
\caption{Configuration parameters of the product configuration file}\\
\label{tab_product_config_params}
\bf{Name}          & \bf{Type} & \bf{Description}\\
\hline
\endfirsthead

\multicolumn{3}{c}%
{\tablename\ \thetable\ -- \textit{Continued from previous page}}\\
\bf{Name}          & \bf{Type} & \bf{Description}\\
\hline
\endhead

\hline
\multicolumn{3}{r}{\textit{Continued on next page}}\\
\endfoot

\hline
\endlastfoot

dataSetList        & STRARR    & A list of the datasets that are generated for the
                                 data processing. There must be a structure in the product
                                 configuration file defining
                                 the dataset and its product for each dataset in
                                 this list. The list of datasets may include the processing level.
                                 {\bf TODO: add link to the definition of processing level}   \\
<datasetname>      & STRUCT    & A structure defining a dataset. The <datasetname> must
                                 be a member of the \emph{dataSetList} list. The structure
                                 defines the type of the dataset, its parameters and the
                                 products that are applied to this dataset.
                                 The <datasetname> can be freely chosen. Just make sure the
                                 spelling is the same in the dataSetList.
                                 The <datasetname> is used for the path to store the
                                 products:
                                 <saveimgbasepath>/<name>/<YYYY-MM-DD>/<datasetname>/<prodname>/
                                 <outputname>.\\
                   &           & The mandatory fields of this structure are described below.
                                 The fields depending on the dataset type are described in
                                 Section~\ref{sec_datasets}.\\
\hangindent=1em \hangafter=0
type               & STRING    & Type of the dataset. The tables in Section~\ref{sec_datasets} list
                                 all possible dataset types.\\
\hangindent=1em \hangafter=0
datatype           & STRARR    & Raw (or input) datatype. The dataset is generated using
                                 rainbow raw files of this datatypes or the dataset is
                                 generated using multiple raw files with different datatypes.\\
\hangindent=1em \hangafter=0
IGNORE\_\-MISSING\_VOLS & INT & OPTIONAL. If set, the function processing the dataset
                                 is called if not all input data volumes could be selected. For
                                 example this could be used for the sanity check. In such a case
                                 only the checks are done with the available input volumes.
                                 By default, this option is off. {\bf TODO: can be removed?}\\
\hangindent=1em \hangafter=0
        DSSAVENAME & STRING   &  OPTIONAL. Usually the product files are stored under the name of the
                                 dataset. If this parameter is saved, the files are stored under
                                 this name instead of the dataset name.\\
\hangindent=1em \hangafter=0
        INPUT\-PROCESSING & STRUCT & OPTIONAL. Input processing of one or more input volumes. See
                                 section~\ref{subsec_general_processing} for details. {\bf TODO: can be removed?}\\
\hangindent=1em \hangafter=0
        DATASET\-PROCESSING & STRUCT & OPTIONAL. Dataset processing of a volume dataset. See
                                 section~\ref{subsec_general_processing} for details. {\bf TODO: can be removed?}\\
\hangindent=1em \hangafter=0
        products   & STRUCT    & This structure contains a list of products. Each product
                                 is a structure named as <prodname>. For the product
                                 description see Section~\ref{sub_products}.\\
\hangindent=2em \hangafter=0
        <prodname> & STRUCT    & Structure defining a product of the dataset.
                                 The <prodname> can be freely chosen. The <prodname> is
                                 used to store the output products:
                                 <saveimgbasepath>/<name>/<YYYY-MM-DD>/<datasetname>/<prodname>/
                                 <outputname>.\\
                   &           & The mandatory fields of this structure are described below.
                                 The fields depending on the product type are described in
                                 Section~\ref{sub_products}.\\
\hangindent=2.1em \hangafter=0
         type      & STRING    & Type of the product. Section~\ref{sub_products} describes all possible
                                 product types.\\
\end{longtable}

\paragraph{Example:} A simple product config file is listed below:
\begin{verbatim}
#
# Product generation configuration
#

# List of datasets to generate.
# The detailed specification of each dataset is given below.
dataSetList STRARR 12
   l0:TEMP
   l0:reflectivity
   l0:ZDR
   l0:RhoHV   
   l0:echoID
   l1:echoFilter
   l3:echoFilter_Ah
   l2:outlierFilter
   l2:Att_ZPhi
   l3:hydroclass
   l4:rainrate   
   l3:wind


# ==========================================================================================
#               COSMO data
# ==========================================================================================
TEMP STRUCT 6
    type STRING COSMO_LOOKUP
    datatype STRARR 1
        dBZ        
    cosmo_type STRING TEMP
    regular_grid INT 0
    lookup_table INT 1
    MAKE_GLOBAL INT 1
	
	
# ==========================================================================================
#                 raw data processing
# ==========================================================================================
reflectivity STRUCT 3
   type     STRING RAW
   datatype STRING dBZ
   products STRUCT 4      
      EL03_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 0
         voltype STRING dBZ
      EL04_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 1
         voltype STRING dBZ
      EL05_7 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 2
         voltype STRING dBZ      
      SAVESTATE STRUCT 2
         type STRING SAVESTATE
         voltype STRING dBZ
         
ZDR STRUCT 3
   type     STRING RAW
   datatype STRING ZDR
   products STRUCT 3      
      EL03_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 0
         voltype STRING ZDR
      EL04_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 1
         voltype STRING ZDR
      EL05_7 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 2
         voltype STRING ZDR
         
RhoHV STRUCT 3
   type     STRING RAW
   datatype STRING RhoHV
   products STRUCT 3      
      EL03_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 0
         voltype STRING RhoHV
      EL04_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 1
         voltype STRING RhoHV
      EL05_7 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 2
         voltype STRING RhoHV
		 
		 
# ==========================================================================================
#                 echo identification
# ==========================================================================================
echoID STRUCT 3
    type STRING SAN
    datatype STRARR 4
        dBZ
        ZDR
        uPhiDP
        RhoHV
    MAKE_GLOBAL INT 1


# ==========================================================================================
#                 clutter and noise suppression
# ==========================================================================================
# echo type 3 : precip, 2 : clutter, 1 : noise
echoFilter STRUCT 4
    type STRING ECHO_FILTER
    datatype STRARR 8
        PROC:echoID
        dBZ        
        ZDR
        RhoHV
        PhiDP
        KDP
		V
		W
    echo_type INT 3
    MAKE_GLOBAL INT 1

echoFilter_Ah STRUCT 4
    type STRING ECHO_FILTER
    datatype STRARR 2
        PROC:echoID
        PROC:Ah
    echo_type INT 3
    MAKE_GLOBAL INT 1
	
	
# ==========================================================================================
#                 outlier filter
# ==========================================================================================    
outlierFilter STRUCT 8
    type STRING OUTLIER_FILTER
    datatype STRARR 1
        PROC:Vc
    threshold FLOAT 10.
    nb INT 2
    nb_min INT 3
    percentile_min FLOAT 5.
    percentile_max float 95.
    MAKE_GLOBAL INT 1


# ==========================================================================================
#                 Attenuation
# ==========================================================================================
Att_ZPhi STRUCT 5
    type STRING ATTENUATION
    datatype STRARR 4
        PROC:dBZc
        PROC:ZDRc
        PROC:PhiDPc
        PROC:TEMP
    ATT_METHOD STRING ZPhi
    fzl FLOAT 2000.
    MAKE_GLOBAL INT 1

	
# ==========================================================================================
#                 hydrometeor classification products
# ==========================================================================================
hydroclass STRUCT 5
    type STRING HYDROCLASS
    datatype STRARR 5
        PROC:dBZc
        PROC:ZDRc
        PROC:RhoHVc
        PROC:KDPc
        PROC:TEMP
    HYDRO_METHOD STRING SEMISUPERVISED
    RADARCENTROIDS STRING DX50
    MAKE_GLOBAL INT 1


# ==========================================================================================
#               rainfall rate
# ==========================================================================================            
rainrate STRUCT 5
    type STRING RAINRATE
    datatype STRARR 3
        PROC:dBZc
        PROC:Ahc
        PROC:hydro
    RR_METHOD STRING hydro
    MAKE_GLOBAL INT 1
    products STRUCT 3      
      EL03_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 0
         voltype STRING RR
      EL04_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 1
         voltype STRING RR
      EL05_7 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 2
         voltype STRING RR

			
# ==========================================================================================
#               wind velocity
# ==========================================================================================
wind STRUCT 5
    type STRING WIND_VEL
    datatype STRARR 1
        PROC:Vc
    vert_proj INT 0
    MAKE_GLOBAL INT 1
    products STRUCT 3      
      EL03_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 0
         voltype STRING wind_vel_h_az
      EL04_0 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 1
         voltype STRING wind_vel_h_az
      EL05_7 STRUCT 3
         type  STRING PPI_IMAGE
         anglenr INT 2
         voltype STRING wind_vel_h_az
\end{verbatim}

The example product configuration files defines twelve datasets: let us take the example of \emph{l0:reflectivity}
and \emph{l4: rainrate}.

The \emph{reflectivity} dataset is a \emph{RAW} dataset generated using the raw
datatype \emph{dBZ}. Four products are generated for this dataset: the products
\emph{EL03\_0}, \emph{EL04\_0}, \emph{EL05\_7} which are of type \emph{PPI\_IMAGE} (the first, second and third PPIs in a volume scan, as given in field \emph{anglenr}). The images are stored in
<saveimgbasepath>/<name>/<YYYY-MM-DD>/reflectivity/EL0X\_X/. The fourth product saves the volume in the path given by \emph{loadbasepath} fo the main configuration file. {\bf TODO: check that}

The \emph{rainrate} dataset is a \emph{RAINRATE} dataset generated using the processed
datatypes \emph{dBZc}, \emph{Ahc}, \emph{hydro}, by means of the \emph{HYDRO} retrieval method.
In analogous way with respect to the \emph{reflectivity} dataset, PPI images are generated as products.

\subsection{Input- and DataSet-Processing}
\label{subsec_general_processing}

{\bf TODO: -jgr- -fvj- if i understand correctly, this is outdated. Need to see what is the equivalent for pyrad. }


%Each input volume can be processed before the dataset is generated. And
%a volume dataset (not a dataset trajectory or time series) can be processed
%before the products are generated.
%
%The following processes can be done with a input- or dataset volume:
%clutter removal, melting layer removal, outlier removal and data
%smoothing.
%
%Table~\ref{tab_general_processing} defines the parameters of
%the input- and dataset-processing configuration.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%ENABLE               & INT     & If set to 1, the chosen volume processing
%                                 is enabled. If 0, the volume processing is
%                                 skipped.\\
%DATATYPES            & STRARR  & OPTIONAL. Select the input volume datatypes
%                                 for which the processing applies. If not given,
%                                 the processing is applied to all volumes.\\
%TYPE                 & STRING  & Type of the input processing. Must be one of
%                                 the following: REMOVE\_CLUTTER, REMOVE\_MELTINGLAYER,
%                                 OUTLIERS\_REMOVAL or BLUR.\\
%THRESHOLD            & FLOAT   & Used for OUTLIERS\_REMOVAL: An outlier is identified
%                                 if the difference of the value to the median of the value
%                                 and its neighbors is larger than this threshold.\\
%BLURTYPE             & STRING  & Used for BLUR: Define the smoothing type. Must be one
%                                 of the following: GAUSS, BINOMIAL, SIMPLE, FILL\_NANS.\\
%SIZE                 & INT     & Used for BLUR: Size of the blur pattern. usually 3 (for a
%                                 3x3 pattern).\\
%SIGMA                & FLOAT   & Used for BLUR, BLURTYPE=GAUSS: Standard deviation of the
%                                 Gaussian distribution.\\
%\end{tabularx}
%\caption{Parameters of a input- or dataset processing.}
%\label{tab_general_processing}
%\end{table}
%
%\paragraph{Example:} An example defining a dataset (''reflectivity'') who's input
%volumes (datatype: ''dBZ'') are preprocessed by three algorithms: ''rmclutter'',
%''rmoutliers'' and ''smooth''. Each of this algorithms as is enabled, is defined
%by a type and optionally has its parameters.
%\begin{verbatim}
%dataSetList STRARR 1
%   reflectivity
%
%reflectivity STRUCT 3
%   type     STRING RAW
%   datatype STRING dBZ
%   INPUTPROCESSING STRUT 3
%      rmclutter STRUCT 2
%         ENABLE    INT    1
%         TYPE      STRING REMOVE_CLUTTER
%      rmoutliers STRUCT 3
%         ENABLE    INT    1
%         TYPE      STRING REMOVE_OUTLIERS
%         THRESHOLD FLOAT  10.0
%      smooth STRUCT 5
%         ENABLE    INT    1
%         TYPE      STRING BLUR
%         BLURTYPE  STRING GAUSS
%         SIZE      INT    3
%         SIGMA     FLOAT  0.6
%   products STRUCT 1
%      AZ107 STRUCT 2
%         type  STRING RHI_IMAGE
%         anglenr INT 6
%\end{verbatim}

\newpage

% ---------------------------------------------------------------------------------
% Datasets
% ---------------------------------------------------------------------------------
\section{Datasets}
\label{sec_datasets}

Each dataset has a format. The possible formats are listed in Table~\ref{tab_dataset_formats}. The dataset \emph{type} is then a subset of these possible formats. A list with all possible dataset types for each dataset format is given in the following tables.
If a dataset type starts with \emph{TRAJ}, it uses a plane trajectory to generate the dataset.

{\bf TODO: check in pyrad\_proc/proc/process\_aux.py to see which datasets exist. Does the concept of dataset type still exist?}

%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{lX}
\begin{longtable}{p{0.30\textwidth}p{0.60\textwidth}}

\caption{List of all possible formats of a dataset}\\
\label{tab_dataset_formats}

\bf{Name}          & \bf{Description}\\
\hline
\endfirsthead

\multicolumn{2}{c}%
{\tablename\ \thetable\ -- \textit{Continued from previous page}}\\
\bf{Name}          & \bf{Description}\\
\hline
\endhead

\hline
\multicolumn{2}{r}{\textit{Continued on next page}}\\
\endfoot

\hline
\endlastfoot

\rowcolors{1}{darkgray}{lightgray}


%\bf{Name}              & \bf{Description}\\
VOL                    & A structure with a volume with 3-dimensional data (azimuth, elevation and range).\\
RAY                    & As a volume structure without range dimension. The data are two-dimensional as
                         function of (azimuth, elevation). {\bf TODO: still there? or to be done? }                                     \\
TIMESERIES             & A structure with an array with 2 dimensions: time and one or more values (e.g.
                         mean, min, max, quantiles, ...)\\
TIMEARRAY              & A structure with a two-dimensional array: time and another parameter (e.g.
                         altitude)\\
TIMEARRAY\_ARRAY       & A structure with a three-dimensional array: type, time and another parameter
                         (usually altitude) {\bf TODO:  Still there?}\\
TRAJ\_ONLY             & Trajectory data only. A structure containing a timeseries structure with range,
                         azimuth and elevation position of the plane. {\bf TODO: still there? or to be done? }                                     \\
TRAJ\_VOL\_COMPOSITE   & A volume structure (azimuth, elevation and range). It is a composite of several
                         raw volume projected to the plane trajectory. {\bf TODO: still there? or to be done? }                                     \\
VOLUMEGROUP            & XXX to be described {\bf TODO: still there? or to be done? }                                     \\
PSR                    & A structure with a volume with 4-dimensional data. For each (azimuth, elevation
                         and range) tuple a vector with values for each spectrum sample is given. {\bf TODO: still there? or to be done? }                                    \\
ARRAY\_PSR              & A structure with a volume with 5-dimensional data. For each (data type, azimuth,
                         elevation and range) tuple a vector with values for each spectrum sample is given.
                         It is a concatenation of spectra generated by a processing routine. {\bf TODO: still there? or to be done? }                                    \\
MONITORING             & A structure with the data resultant from the data quality monitoring. For each
                         parameter monitored there is a space-time matrix containing the results of the
                         monitoring for each volume and several statistical parameters.\\
ARRAY\_VOL             & A structure with a volume with a 4-dimensional data (type,azimuth,elevation,range).
                         It is a concatenation of volumes generated together by a processing routine.\\
SUN\_MONITORING        & This dataset is computed offline. It generates two different structures. When
                         processing data, whenever there is a possible sun hit it generates a volume array
                         with sun hit information (channel power, zdr, position of sun hit, ...). At the
                         end of the data processing generates a structure with the parameter
                         datatype\_array=SUN\_HITS, the sun hits file name, the sun retrieval file name
                         and the parameters of the fitting for horizontal sun power, vertical sun power
                         and sun differential reflectivity. {\bf TODO: is it still there or integrated somewhere else?}\\
XVSC                   & Used for the intercomparison of averaged reflectivity. A structure that contains
                         a list of the radars with which the processed radar is compared and the volume
                         time. {\bf TODO: is it still there?}\\
INTERCOMP              & Used for the inter-comparison of any radar variable. A structure that contains
                         a list of the radars with which the processed radar is compared, the volume time
                         and the data type. {\bf TODO: see comments below}\\
HISTOGRAM              & A structure with 2D and 1D histograms of radar variables. {\bf TODO: see comments below}\\
COMPOSITE\_VOLUME      & A nested structure that can embed two sub-structures. Each sub-structure is a volume
                         with 3D data (see VOL) or 4D data (see ARRAY\_VOL). Usually one sub-structure
                         includes PPI scans and the second one RHI scans. {\bf TODO: still of interest?}\\
%\end{tabularx}
%\caption{List of all possible formats of a dataset}
%\label{tab_dataset_formats}
%\end{table}
\end{longtable}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}             & \bf{Description}                                                       & \bf{Reference}\\
SAN                   & Sanity check dataset. This dataset is used to preprocess other raw data for other datasets.   & Section~\ref{subsec_san}\\
RAW                   & Use a rainbow raw volume directly as dataset.                          & Section~\ref{subsec_raw}\\
WINDSHEAR             & Calculate the windshear.                                               & Section~\ref{subsec_windshear}\\
RAINRATE         & Rainrate retrieval with a selected method.                                                   & Section~\ref{subsec_rainrate}\\
BACKSCATTER           & Calculate the radar backscattering cross setion from the reflectivity. {\bf TODO: still there? or to be done? } & Section~\ref{subsec_backscatter}\\
SPEC\_QUALITY         & Compare V and W estimations with the Doppler spectrum {\bf TODO: still there? or to be done? }                 & Section~\ref{subsec_SPEC_QUALITY}\\
SPHERECALIBRATION     & Processing of the sphere calibration measurement   {\bf TODO: still there? or to be done? }                    & Section~\ref{subsec_SPHERECALIBRATION}\\
IQ\_RHOHV             & Computes RhoHV from raw IQ data.  {\bf TODO: still there? or to be done? }                                     & Section~\ref{subsec_iq_rhohv}\\
IQ\_ZDR               & Computes Zdr from raw IQ data.   {\bf TODO: still there? or to be done? }                                      & Section~\ref{subsec_iq_zdr}\\
\end{tabularx}
\caption{List of all possible dataset types for VOL datasets}
\label{tab_datasets_VOL}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                    & \bf{Reference}\\
RAINEXTENSION & Calculate the rain extension. {\bf TODO: still there? or to be done? }                                           & Section~\ref{subsec_rainextension}\\
\end{tabularx}
\caption{List of all possible dataset types for RAY datasets}
\label{tab_datasets_RAY}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                      & \bf{Reference}\\

TRAJ\_ATPLANE & A trajectory is combined with saved rainbow
                volumes.                                              & Section~\ref{subsec_traj_atplane}\\
TRAJ\_ANTENNA\_PATTERN & A trajectory is combined with saved rainbow
                         volumes.                                     & Section~\ref{subsec_traj_antennapattern}\\
POINT\_MEASUREMENT & The radar measurement over one specific point                              & Section~\ref{subsec_point_measurement}\\
\end{tabularx}
\caption{List of all possible dataset types for TIMESERIES datasets}
\label{tab_datasets_TIMESERIES}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                 & \bf{Reference}\\
TIME\_HEIGHT  & Make a time-height profile. {\bf TODO: still there? or to be done? }                                           & Section~\ref{subsec_time_height}\\
TIME\_VECTOR  & Make a time-vector dataset. {\bf TODO: still there? or to be done? }                                          & Section~\ref{subsec_time_vector}\\
QVP  & Make a Quasi Vertical Profile (QVP)  {\bf TODO: still there? or to be done? }                                         & Section~\ref{subsec_qvp}\\
\end{tabularx}
\caption{List of all possible dataset types for TIMEARRAY datasets}
\label{tab_datasets_TIMEARRAY}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                 & \bf{Reference}\\

TIME\_SUMMARY\_HEIGHT  & Make a set of time-height profiles. Each profile is a statistical moment (over height levels) of an RHI image. {\bf TODO: still there? or to be done? }                                          & Section~\ref{subsec_time_summary_height}\\
\end{tabularx}
\caption{List of all possible dataset types for TIMEARRAY\_ARRAY}
\label{tab_datasets_TIMEARRAY_ARRAY}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\

TRAJ          & Uses a trajectory without radar data. Note,
                just a few product types can be applied on this
                dataset.                                        & Section~\ref{subsec_traj}\\
TRAJ\_PLANEHITS & Uses a trajectory to find plane hits in
                  radar data.                                   & Section~\ref{subsec_traj_planehits}\\
\end{tabularx}
\caption{List of all possible dataset types for TRAJ\_ONLY datasets {\bf TODO: still there? or to be done? }                                     }
\label{tab_datasets_TRAJ_ONLY}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\

TRAJ\_VOL     & A trajectory is combined with raw rainbow
                volumes.                                        & Section~\ref{subsec_traj_vol}\\
\end{tabularx}
\caption{List of all possible dataset types for TRAJ\_VOL\_COMPOSITE datasets {\bf TODO: still there? or to be done? }                                     }
\label{tab_datasets_TRAJ_VOL_COMPOSITE}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\

QUANTILE      & Quantile calculation.      {\bf TODO: still there? or to be done? }                                                         & Section~\ref{subsec_quantile}\\
\end{tabularx}
\caption{List of all possible dataset types for VOLUMEGROUP datasets}
\label{tab_datasets_VOLUMEGROUP}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}             & \bf{Description}                                                    & \bf{Reference}\\
PSR\_RAW              & The raw spectra values.                                             & Section~\ref{subsec_psr_raw}\\
PSR\_MERGE            & Merges every two spectra with different PRF to one.                 & Section~\ref{subsec_psr_merge}\\
PSR\_VERTICAL         & XXX to be described                                                 & Section~\ref{subsec_psr_vertical}\\
PSR\_SZH              & Computes the spectral horizontal reflectivity                       & Section~\ref{subsec_psr_szh}\\
PSR\_SZV              & Computes the spectral vertical reflectivity                         & Section~\ref{subsec_psr_szv}\\
PSR\_SZZDR            & Computes the spectral differential reflectivity                     & Section~\ref{subsec_psr_szdr}\\
PSR\_SZDR\_TEXT       & Computes the texture of the spectral differential reflectivity      & Section~\ref{subsec_psr_szdr_text}\\
PSR\_SRHOHV           & Computes the spectral co-polar correlation coefficient              & Section~\ref{subsec_psr_srhohv}\\
PSR\_SPHIDP           & Computes the spectral differential phase                            & Section~\ref{subsec_psr_sphidp}\\
PSR\_SPHIDP\_TEXT     & Computes the texture of the spectral differential phase             & Section~\ref{subsec_psr_sphidp_text}\\
PSR\_DSD              & Computes the drop size distribution (DSD) from spectral parameters. & Section~\ref{subsec_psr_dsd}\\
\end{tabularx}
\caption{List of all possible dataset types for PSR datasets {\bf TODO: not there yet, but to be done? }                                     }
\label{tab_datasets_PSR}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}             & \bf{Description}                                                   & \bf{Reference}\\
PSR\_FILTER           & Computes spectral polarimetric variables and filters out clutter
                        contaminated Doppler bins                                          & Section~\ref{subsec_psr_filter}\\
PREPROC\_PSR          & Computes spectral polarimetric variables and optionally filters
                        out clutter contaminated Doppler bins. The clean polarimetric
                        variables are then usable by other functions.                      & Section~\ref{subsec_psr_preproc}\\
\end{tabularx}
\caption{List of all possible dataset types for ARRAY\_PSR datasets {\bf TODO: still there? or to be done? }                                    }
\label{tab_datasets_ARRAY_PSR}
\end{table}


\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\

MONITORING & The data obtained by the data quality monitoring process   & Section~\ref{subsec_monitoring}\\
\end{tabularx}
\caption{List of all possible dataset types for MONITORING datasets {\bf TODO: changed from MON to MONITORING. Ok? }                                    }
\label{tab_datasets_MONITORING}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}                 & \bf{Description}                                                                                                                                & \bf{Reference}\\
PREPROCESSING        & Preprocessing of raw radar data.   {\bf TODO: still there? or to be removed? }                                     & Section~\ref{subsec_preprocessing}\\
MEANZ                   & Time-averaged reflectivity, differential phase (weighted by reflectivity) and a flag matrix containing information on clutter and attenuation within the time of averaging.  {\bf TODO: still there? or to be removed? }                                      & Section~\ref{subsec_meanz}\\
XVSC\_POSITION           & A boolean matrix with 1 indicating the range bins usable for intercomparison with each radar.  {\bf TODO: still there? or changed name? }                                                                                            & Section~\ref{subsec_xvsc_position}\\
ATTENUATION             & Attenuation estimation and attenuation correction on the polarimetric variables.                                                                     & Section~\ref{subsec_attenuation}\\
HYDROCLASS             & Hydrometeor classification.                                                                                                        & Section~\ref{subsec_hydroclass}\\
PHIDP\_KDP                & K$_{dp}$ and $\Phi_{dp}$ estimated from raw noisy $\Psi_{dp}$.  {\bf TODO: still there? or name is now splitted in several smaller ones? }   & Section~\ref{subsec_phidp_kdp}\\
PSR\_POLVARIABLES        & Computes the polarimetric variables from the spectra. {\bf TODO: Not there yet, i guess}                     & Section~\ref{subsec_psr_polvariables}\\
PSR\_DSDBASED\_PARAM    & Computes parameters based on integrated DSD such as liquid water content (LWC) and rainfall rate.  {\bf TODO: Not there yet, i guess}                                                  & Section~\ref{subsec_psr_dsdbased_param}\\
\end{tabularx}
\caption{List of all possible dataset types for ARRAY\_VOL datasets}
\label{tab_datasets_ARRAY_VOL}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\
SUN\_MONITORING & sun monitoring data & Section~\ref{subsec_sun_monitoring}\\
\end{tabularx}
\caption{List of all possible dataset types for sun monitoring datasets. {\bf TODO: is it still there?}}
\label{tab_datasets_sun_monitoring}
\end{table}


\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\
XVSC   & inter-comparison of time-averaged reflectivity between radars. & Section~\ref{subsec_xvsc}\\
\end{tabularx}
\caption{List of all possible dataset types for XVSC datasets {\bf TODO: is it still there?}  }
\label{tab_datasets_XVSC}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\
INTERCOMP   & inter-comparison of instantaneous values of polarimetric parameters between radars. & Section~\ref{subsec_intercomp}\\
\end{tabularx}
\caption{List of all possible dataset types for INTERCOMP datasets. {\bf TODO: is it still there? or does it correspond to the current INTERCOMP\_TIME\_AVG ?}}
\label{tab_datasets_INTERCOMP}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\
HISTOGRAM   & 1D and 2D histograms of polarimetric data. & Section~\ref{subsec_histogram}\\
\end{tabularx}
\caption{List of all possible dataset types for HISTOGRAM datasets. {\bf TODO: still there as datasets?}}
\label{tab_datasets_HISTOGRAM}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
\bf{Name}     & \bf{Description}                                & \bf{Reference}\\
--------   & COMPOSITE\_VOLUME are just combination of VOL datasets  & Section~\ref{subsec_composite_volume_dataset}\\
\end{tabularx}
\caption{List of all possible dataset types for COMPOSITE\_VOLUME datasets. {\bf TODO: still there?}}
\label{tab_datasets_COMPOSITE_VOLUME}
\end{table}

\subsection{VOL Datasets}

\subsubsection{SAN}
\label{subsec_san}

A sanity check dataset. From four raw input data volumes (dBZ, ZDR, uPhiDP and RhoHV)
each radar cell is checked if its value is feasible. The output sanity volume
contains a mask for each radar cell indicating if the cell is noise, clutter
or melting layer. This dataset can be stored to a global variable and can be used to preprocess
the raw input data of other datasets.

{\bf Note}, that this dataset must be at the first place in the dataset list!

The parameters of a \emph{SAN} dataset are listed in Table~\ref{tab_dataset_san}.
The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
description of these parameters.

{\bf TODO: here i checked in process\_echoclass.py and i am not sure the configuration inputs below still apply. Do they?}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
NO\_MELTINGLAYER & INT & OPTIONAL. If set to 1, the melting layer cells are not marked.
                         By default, this option is not set.\\
RHOMIN & FLOAT & OPTIONAL. Default 0.75. The minimum value of Rhohv to flag the gate as suspected melting layer.\\
RHOMAX & FLOAT & OPTIONAL. Default 0.94. The maximum value of Rhohv to flag the gate as suspected melting layer.\\
NML\_POINTS\_MIN & INT & OPTIONAL. Default 1500. The minimum number of suspected melting layer radar bins to compute a valid melting layer.\\
PERCENTILE\_BOTTOM & FLOAT & OPTIONAL. Default 0.3. The percentile of radar bins from which the melting layer bottom is considered to start.\\
NO\_SANITYCHECK  & INT & OPTIONAL. If set to 1, the clutter cells determined by the sanity
                         check are not marked. By default, this option is not set.\\
DOTEXTURE & INT & OPTIONAL. Default 1. If set the sanity check uses information on texture of the polarimetric variables to identify clutter.\\
TEXTPHI & FLOAT & OPTIONAL. Default 0.266 [Deg/m]. The threshold on the texture of Phidp to consider the radar bin clutter contaminated.\\
TEXTRHO & FLOAT & OPTIONAL. Default 0.004 [1/m]. The threshold on the texture of Rhohv to consider the radar bin clutter contaminated.\\
TEXTZDR & FLOAT & OPTIONAL. Default 0.038 [dB/m]. The threshold on the texture of Zdr to consider the radar bin clutter contaminated.\\
TEXTZH & FLOAT & OPTIONAL. Default 0.107 [dBz/m]. The threshold on the texture of Zh to consider the radar bin clutter contaminated.\\
NNEIGHBOUR\_MIN & INT & OPTIONAL. Default 0. If set to a value larger than 0 speckle filtering is performed. The filter checks how many valid neighbors a valid range bin has. If it is less than what is specified by this parameter the range bin is set to clutter.\\
NO\_NOISE        & INT & OPTIONAL. If set to 1, the noise cells are not marked.
                         By default, this option is not set.\\
NO\_CLUTTERMAP   & INT & OPTIONAL. If set to 1, the clutter cells determined by the clutter
                         map are not marked. By default, this option is not set.\\
MAKE\_GLOBAL     & INT & OPTIONAL. If set to 1, the sanity dataset is made global and can be
                         used for the input processing for other datasets.
                         By default, this option is not set.\\
\end{tabularx}
\caption{Parameters of a RAW dataset (without the general parameters).}
\label{tab_dataset_san}
\end{table}

\subsubsection{RAW}
\label{subsec_raw}

Use a rainbow raw volume directly as dataset.

The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
description of these parameters.

\subsubsection{WINDSHEAR}
\label{subsec_windshear}

Calculate the windshear from a Doppler velocity raw volume.

The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
description of these parameters.

\subsubsection{RAINRATE}
\label{subsec_rainrate}
Rain rate retrieval. Several rain rate retrievals are implemented. Depending on the retrieval different input data types are necessary. Each retrieval is called by using the dataset structure entry \emph{RR\_METHOD} (i.e. ``hydro''). Table~\ref{tab_dataset_rainrate} describes the possible rain rate datasets. In retrievals that have a frequency dependence the parameter BANDPARAMS can be set. It is a string with possible values S, C and X and default value X.

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lllX}
\bf{Retrieval}  & \bf{Input Data Type}    & \bf{Output Data Type}  & \bf{Description}\\
Z               & dB(u)Z(c)               & RR\_Zh                 & Single Z-R relation.\\
KDP             & KDP(c)                  & RR\_Kdp                & Kdp-R relation.\\
A               & Ah(c)                      & RR\_Ah                 & Ah-R relation.\\
%ML              & dB(u)Z(c) and ISO0      & RR\_ML                 & Z-R relation varies according to position respect
%                                                                     to the melting layer. If melting layer position have not
%                                                                     been retrieved ISO0 data is used instead. If ISO0 data is
%                                                                     not present a single Z-R relation is used for the entire volume.\\
%ML2             & dB(u)Z(c), Ah and ISO0  & RR\_ML2                & Same as ML but Ah-R relation is used below the melting layer when specific attenuation is significant.\\
ZA              &         dB(u)Z(c), Ah(c)             &   {\bf TODO, complete}                &  \\
ZKDP            &         dB(u)Z(c), KDP(c)            &  {\bf TODO, complete}  & Use of Kdp-R or Z-R relation  \\
ZPoly           &         {\bf TODO, complete}         &                  &  \\
hydro           &         dB(u)Z(c), Ah(c)             &   {\bf TODO, complete}     &  \\

\end{tabularx}
\caption{Description of RAINRATE dataset types.}
\label{tab_dataset_rainrate}
\end{table}


\subsubsection{BACKSCATTER}
\label{subsec_backscatter}

{\bf TODO: is it still valid for pyRad?}

%Calculate the backscatter cross sections from the radar reflectivity values.
%
%The parameters of a \emph{BACKSCATTER} dataset are listed in Table~\ref{tab_dataset_BACKSCATTER}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%datatype       & STRARR     & The attenuation generation is based on radar reflectivity.
%                              Either dBz, dBZv, dBuZ or dBuZv.\\
%\end{tabularx}
%\caption{Parameters of a BACKSCATTER dataset (without the general parameters).}
%\label{tab_dataset_BACKSCATTER}
%\end{table}


\subsubsection{SPEC\_QUALITY}
\label{subsec_SPEC_QUALITY}

{\bf TODO: is it still valid for pyRad?}


%Compare the Doppler velocity V and the Doppler spectrum width W with the corresponding
%spectrum. A volume structure with a quality measure per spectrum is given.
%
%The parameters of a \emph{SPEC\_QUALITY} dataset are listed in Table~\ref{tab_dataset_SPEC_QUALITY}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%datatype       & STRARR     & Three input volumes must be specified. A Doppler velocity volume
%                              (DATATYPE V, Vv, Vu or Vvu), a Doppler spectrum width (either
%                              W, Wv, Wu or Wvu) and a Doppler spectrum raw file (datatype
%                              ShADU\_MS or SvADU\_MS).
%\end{tabularx}
%\caption{Parameters of a SPEC\_QUALITY dataset (without the general parameters).}
%\label{tab_dataset_SPEC_QUALITY}
%\end{table}

\subsubsection{SPHERECALIBRATION}
\label{subsec_SPHERECALIBRATION}

{\bf TODO: is it still valid for pyRad?}


%Is under construction, at the moment is nothing else the RAW.\\
%The parameters of a \emph{SPHERECALIBRATION} dataset are listed in Table~\ref{tab_dataset_SPHERECALIBRATION}.
%
%Description
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}   & \bf{Description}\\
%type            & STRING      & SPHERECALIBRATION\\
%datatype        & STRING      & dBuZ, dBuZv, Vu, Wu, RhoHVu, RhoHV, uPhiDPu, ZDRu, ZDR\\
%\end{tabularx}
%\caption{Parameters of a SPHERECALIBRATION dataset (without the general parameters).}
%\label{tab_dataset_SPHERECALIBRATION}
%\end{table}

\subsubsection{IQ\_RHOHV}
\label{subsec_iq_rhohv}

{\bf TODO: is it still valid for pyRad?}


%Computes the co-polar correlation coefficient (RhoHV) from raw IQ data. RhoHV can be computed either
%using lag-0 or lag-1. If lag-0 is used a noise correction using the noise values estimated from the
%Doppler spectra can be performed.
%
%The parameters of a \emph{IQ\_RHOHV} dataset are listed in Table~\ref{tab_dataset_iq_rhohv}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}      & \bf{Type}      & \bf{Description}\\
%type                & STRING        & IQ\_RHOHV\\
%datatype               & STRARR        & 6 input volumes must be specified IQ:IhCPX, IQ:IvCPX, IQ:WhADU, IQ:WvADU, IQ:NhADU and IQ:NvADU\\
%lag                   & INT        & Possible values: 0, 1. Default 0. lag used to compute the moment.\\
%noise\_correction    & INT        & Possible values: 0, 1. Default 1. If set at lag0 is used to compute the moment a noise correction is performed.\\
%\end{tabularx}
%\caption{Parameters of a IQ\_RHOHV dataset}
%\label{tab_dataset_iq_rhohv}
%\end{table}


\subsubsection{IQ\_ZDR}
\label{subsec_iq_zdr}

{\bf TODO: is it still valid for pyRad?}

%Computes the differential reflectivity (Zdr) from raw IQ data and using lag 1.
%
%The parameters of a \emph{IQ\_ZDR} dataset are listed in Table~\ref{tab_dataset_iq_zdr}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}      & \bf{Type}      & \bf{Description}\\
%type                & STRING        & IQ\_ZDR\\
%datatype               & STRARR        & 2 input volumes must be specified IQ:IhCPX, and IQ:IvCPX\\
%\end{tabularx}
%\caption{Parameters of a IQ\_ZDR dataset}
%\label{tab_dataset_iq_zdr}
%\end{table}

\subsection{RAY Datasets}

\subsubsection{RAINEXTENSION}
\label{subsec_rainextension}

{\bf TODO: is it still valid for pyRad?}


%Calculate the horizontal extension of the rain field.
%
%The parameters of a \emph{RAINEXTENSION} dataset are listed in Table~\ref{tab_dataset_rainextension}.
%The general parameters \emph{type}, \emph{ignore\_missing\_vols}
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%DBZTHRES        & FLOAT      & Threshold in dBZ for calculation the rain extension.\\
%\end{tabularx}
%\caption{Parameters of a RAINEXTENSION dataset (without the general parameters).}
%\label{tab_dataset_rainextension}
%\end{table}


\subsection{TIMESERIES Datasets}

\subsubsection{TRAJ\_ATPLANE}
\label{subsec_traj_atplane}

The values nearest to the plane during a trajectory are calculated and returned as
a time series.

The parameters of a \emph{TRAJ\_ATPLANE} dataset are listed in Table~\ref{tab_dataset_atplane}.
The general parameters \emph{type}, \emph{ignore\_missing\_vols}
and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
description of these parameters.

{\bf TODO: if understood correctly from process\_traj.py, it seems that now there is a default behavior and cube, cube\_varbin are obsolete. Correct?}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
datatype       & STRING     & Date type of a volume dataset. A list of generated
                              datatypes is given in Table~\ref{tab_datatypes}. For example the
                              datatyp \emph{RR\_Zh} is possible to use a rainrate
                              volume.\\
CUBE          & INT         & If set to 1, use a cube around to nearest cell (to the plane).
                              Derive min, max, median values from this cube.\\
CUBE\_VARBIN  & INT         & If set to 1, determine the size of the cube according the distance
                              from the radar. If set to 0, use a fixed cube size.\\
\end{tabularx}
\caption{Parameters of a TRAJ\_ATPLANE dataset (without the general parameters).}
\label{tab_dataset_atplane}
\end{table}

\subsubsection{TRAJ\_ANTENNA\_PATTERN}
\label{subsec_traj_antennapattern}

Transform the radar cells to the view of another antenna (an antenna pattern must be
given). A plane trajectory is used. And a time series of the antenna transformation
is returned.

The parameters of a \emph{TRAJ\_ANTENNA\_PATTERN} dataset are listed in Table~\ref{tab_dataset_antenna_pattern}.
The general parameters \emph{type}, \emph{ignore\_missing\_vols}
and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
description of these parameters.

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
datatype       & STRING     & Date type of a volume dataset. A list of generated
                              datatypes is given in Table~\ref{tab_datatypes}. For example the
                              datatyp \emph{RR\_Zh} is possible to use a rainrate
                              volume.\\
ANTENNATYPE   & STRING      & Select the antenna type, either ''AZIMUTH'' or ''ELEVATION''. The
                              antenna pattern files are stored in the config directory and its
                              names are defined in the location config file.\\
PATTERN\_THRES & FLOAT      & OPTIONAL. The transforming algorithm weights the radar cell by the
                              antenna pattern.
                              If there are undefined values, the sum of all weights must be
                              larger than this threshold.\\
USE\_NANS     & INT         & OPTIONAL. If set to 1, the NaNs are set to a fixed number (by default 0.0)
                              and are used for the antenna pattern transformation.\\
NAN\_VALUE    & FLOAT       & OPTIONAL. The value for NaNs if USE\_NANS is set. By default
                              this value is 0.0.\\
RANGE\_ALL    & INT         & OPTIONAL. If set to 1, all range gates up to the plane position
                              are used for the dataset generation (\emph{line of sight}). By default,
                              only the range gate of the plane is used.\\
\end{tabularx}
\caption{Parameters of a TRAJ\_ANTENNA\_PATTERN dataset (without the general parameters).}
\label{tab_dataset_antenna_pattern}
\end{table}

\subsubsection{POINT\_MEASUREMENT}
\label{subsec_point_measurement}
Obtains the value of a polarimetric variable at a particular elevation closest to a point of interest
(latitude, longitude, altitude). The input data type can be any volume. The parameters of a this dataset
are listed in Table~\ref{tab_dataset_point_measurement}.

{\bf TODO: here the parameters are quite different in pyRad. -jgr- check with -fvj-. Example, config file mals\_mei\_dataquality\_prod.txt}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
datatype       & STRING     & any volume data type.\\
lat   & FLOAT      &  latitude of the point of interest [decimal Deg].\\
lon   & FLOAT      &  longitude of the point of interest [decimal Deg].\\
alt   & FLOAT      &  altitude of the point of interest [m].\\
elind   & INT      &  index of the radar elevation.\\
\end{tabularx}
\caption{Parameters of a POINT\_MEASUREMENT dataset (without the general parameters).}
\label{tab_dataset_point_measurement}
\end{table}

\subsection{TIMEARRAY Datasets}

\subsubsection{TIME\_HEIGHT}
\label{subsec_time_height}

{\bf TODO: not there, right?}

%Extract a vertical profile from a data volume and create a time height array
%of data over a specified time period.
%
%The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%ANGLENR        & INT        & Azimuth number of a data volume. This number
%                              specifies the azimuth direction where the vertical
%                              profile is extracted.\\
%HDIST          & FLOAT      & Horizontal distance from radar in km. At this
%                              distance the vertical profile is extracted from the
%                              data volume.\\
%\end{tabularx}
%\caption{Parameters of a TIME\_HEIGHT dataset (without the general parameters).}
%\label{tab_dataset_time_height}
%\end{table}

\subsubsection{TIME\_VECTOR}
\label{subsec_time_vector}

{\bf TODO: not there yet, right?}

%Extract a vector from a volume. The result after some
%time samples is a matrix with the time-vector values.
%There are three possibilities of vector data:
%\begin{enumerate}
%\item Elevation vector: The azimuth and the range
%  are fixed. The vector data consists of the data
%  on a vertical circle segment with fixed azimuth at
%  a fixed distance.
%\item Azimuth vector: The elevation and the range
%  are fixed. The vector data consists of the data
%  on a horizontal circle segment with fixed elevation at
%  a fixed distance.
%\item Range vector: The elevation and the azimuth
%  are fixed. The vector data consists of the data
%  on a radar ray at fixed elevation and azimuth.
%\end{enumerate}
%
%The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters.

%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%MODE           & STRING & Defines the mode of the vector data: Must be one of the following:\\
%$\quad$ TIME\_ELEVATION & & Elevation vector: For fix azimuth and range.\\
%$\quad$ TIME\_AZIMUTH   & & Azimuth vector: For fix elevation and range.\\
%$\quad$ TIME\_RANGE     & & Range vector: For fix elevation and azimuth.\\
%RIND           & INT        & Range bin number to be used for the modes TIME\_ELEVATION and
%                              TIME\_AZIMUTH.\\
%AZIND          & INT        & Azimuth slice number to be used for the modes TIME\_ELEVATION and
%                              TIME\_RANGE.\\
%ELIND          & INT        & Elevation slice number to be used for the modes TIME\_AZIMUTH and
%                              TIME\_RANGE.\\
%\end{tabularx}
%\caption{Parameters of a TIME\_VECTOR dataset (without the general parameters).}
%\label{tab_dataset_time_vector}
%\end{table}


\subsubsection{QVP}
\label{subsec_qvp}
Creates a quasi vertical profile (QVP) of data. A QVP is an azimuthal average of the data at a particular elevation angle presented as a time-height 2D plot. The parameters for QVP datasets are listed in Table~\ref{tab_dataset_qvp}.

{\bf TODO: check if parameters are all ok. It seems so but some spelling may differ.}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
type        & STRING    & must be QVP.\\
datatype    & STRING    & Any data type.\\
h\_max    & FLOAT     & desired maximum height of the QVP [m MSL]. Default=50\\
h\_res    & FLOAT    & desired height resolution [m]. Default=10000\\
ind\_el    & INT    & index of the elevation angle used for the QVP. Default= 0\\
\end{tabularx}
\caption{Parameters of a QVP dataset.}
\label{tab_dataset_qvp}
\end{table}

\subsection{TIMEARRAY\_ARRAY Datasets}

\subsubsection{TIME\_SUMMARY\_HEIGHT}
\label{subsec_time_summary_height}

{\bf TODO: not there yet, right?}

%It takes as input a sequence of \underline{RHI scans}. For each RHI, statistics are computed over height levels (i.e., mean vertical profile, median vertical profile, max value for each height level\dots) and a set of time height arrays is created (one per each statistic). A TIME\_SUMMARY\_HEIGHT dataset has 3 dimensions: type of statistic, time, height.
%
%The general parameters \emph{type}, \emph{datatype},
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters. Table~\ref{tab_dataset_time_summary_height} provides the specific parameters of this dataset.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%ANGLENR        & INT        & Azimuth number of a data volume specifying the azimuth direction of the RHI
%                              used as input. Default is 0.\\
%MAX\_ELE        & FLOAT     & Maximum elevation angles to consider (i.e.
%                               to avoid loss of polarimetric response). Default:
%                                80$^{\circ}$.\\
%MAX\_HEIGHT     & FLOAT     & Maximum height to consider, in kilometers. Default:
%                                15 km.\\
%MINNUMSTAT      & INT       &  Minimum number of valid points needed to
%                               calculate any statistic.
%                               Default is 10 (that is not a good choice in case high
%                               or low quantiles are required.\\
%STATISTICS      & ARRAY
%                            & This array is used to define which statistics among
%                              constant height levels will be calculated. The length of
%                              this array defines the first dimension of the dataset.
%                              The statistics are coded as follows: 0= Mean, -1=Median,
%                               -2=Standard deviation, -3=Min, -4=Max.
%                               Positive values are interpreted as quantiles.
%                               For example 2.4 is the 2.4\% quantile, 99 is the 99\%
%                               quantile and so on. Default of STATISTICS is the value 0.\\
%MIN\_DIST       & FLOAT    & Minimum distance from the radar location where to consider
%                             valid data. Default is 0.5 km.
%                             Ignored if BOX\_ONLY is set to 1.\\
%MAX\_DIST       & FLOAT    & As above, but for the maximum distance. Default is 60 km.\\
%BOX\_ONLY       & INT      & Boolean. If set to 1, not the whole RHI is used but only a
%                             portion inside a rectangular box whose position is not fixed.
%                             The position of the box is selected when the total of the
%                             values of the variable inside the bounded area is maximized.
%                              This is designed to work for reflectivity data and when
%                               individual storm cells need
%                             to be analyzed.\\
%BOXSIZE          & FLOAT   & The size in km of the box window (along the RHI x-axis).
%                              Default is 10 km.\\
%ZH\_LEVELCELL    & FLOAT   & Minimum value of $Z_H$ to be considered within the box
%                             defined in BOXSIZE. Default is 30\,dBZ.\\
%DELTAZ           & FLOAT   & Resolution of the vertical profiles in km.
%                             Default is 0.1 \,km.\\
%cell\_savepath   & STRING &  If set, path where to save the information about the
%                            position of the BOXSIZE.
%                             Use this with reflectivity, and then use
%                             cell\_loadpath if other variables are needed.\\
%
%cell\_loadpath   & STRING &  If set, path where to load the information saved by
%                              cell\_savepath. To be used if cell\_savepath has been
%                              already applied on reflectivity and the current
%                               dataset is other than reflectivity.\\
%path\_hail\_crowd   & STRING & If set, the path to hail crowd sourcing reports,
%                                 to be overlayed with yellow stars on the base
%                                 of the image.\\
%hail\_deltat       & FLOAT   &   Set it to the number of seconds of
%                             tolerance to match a hail report with the radar statistics
%                              (default is  300, i.e. $\pm$ 5 minutes).\\
%hail\_deltadist    & FLOAT  &   Distance with respect to the center of the area where the statistics are calculated defining the tolerance to associate hail report with radar data.
%                              (default is  3000\,m).\\
%  demfile       & STRING & If set, a file containing the Digital Elevation Model
%                                (in IDRISI Raster A.1 format). The DEM values of the center of the area of interest are associated to the dataset.\\
%\end{tabularx}
%\caption{Parameters of a TIME\_SUMMARY\_HEIGHT dataset (without the general parameters).}
%\label{tab_dataset_time_summary_height}
%\end{table}

\subsection{TRAJ\_ONLY Datasets}

\subsubsection{TRAJ}
\label{subsec_traj}

Use a trajectory without any radar data. Note, just a few product types as
plotting of the trajectory range, azimuth and elevation can be
applied on this dataset.

The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
description of these parameters.

\subsubsection{TRAJ\_PLANEHITS}
\label{subsec_traj_planehits}

{\bf TODO: not there yet, right?}

%Find radar cells affected by the radar echo of a plane. The trajectory of the
%plane is combined with the radar antenna movement and possible hits are
%extracted.
%
%The parameters of a \emph{TRAJ\_PLANEHITS} dataset are listed in
%Table~\ref{tab_dataset_traj_planehits}.
%The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%TIME\_OFFSET    & FLOAT      & Shift the trajectory time series. In seconds. Default 0\\
%RMIN            & FLOAT      & Minimal distance to the radar of a plane hit. In km.\\
%RMAX            & FLOAT      & Maximal distance to the radar of a plane hit. In km.\\
%ELMIN           & FLOAT      & Minimal elevation. In deg.\\
%ELMAX           & FLOAT      & Maximal elevation. In deg.\\
%TIME\_PTOL      & FLOAT      & Positive time tolerance of antenna movement and plane. Seconds.\\
%TIME\_MTOL      & FLOAT      & Negative time tolerance. Seconds\\
%AZ\_TOL         & FLOAT      & Azimuth tolerance. Degree.\\
%EL\_TOL         & FLOAT      & Elevation tolerance. Degree.\\
%\end{tabularx}
%\caption{Parameters of a TRAJ\_PLANEHITS dataset (without the general parameters).}
%\label{tab_dataset_traj_planehits}
%\end{table}

\subsection{TRAJ\_VOL\_COMPOSITE Datasets}

\subsubsection{TRAJ\_VOL}
\label{subsec_traj_vol}

{\bf TODO: not there yet, i guess. And not clear to me this dataset. -jgr-}

%A trajectory is combined with raw rainbow volumes.
%
%Note, that the plane trajectory (or the used part of it) must be strictly de- or increasing
%from the radar. The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters.

\subsection{VOLUMEGROUP Datasets}

{\bf TODO: not there yet, i guess. }

\subsubsection{QUANTILE}
\label{subsec_quantile}

{\bf TODO: not there yet? or obsolete?}

%Calculate the quantiles at each radar cell of a series of input volumes. Note, this
%dataset and its products are created after the last input volume.
%
%The general parameters \emph{type}, \emph{ignore\_missing\_vols}
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%QUANTILES       & INTARR     & A list of quantiles to be processed. For each quantile
%                               the corresponding products are generated. A quantile
%                               is a number between 0 and 100, so 50 is the 50\% quantile
%                               or the median.\\
%\end{tabularx}
%\caption{Parameters of a QUANTILE dataset (without the general parameters).}
%\label{tab_dataset_quantile}
%\end{table}

\subsection{PSR Datasets}

{\bf TODO: to clarify the plan for PSR}

\subsubsection{PSR\_RAW}
\label{subsec_psr_raw}

%Use a power spectra (PSR) raw volume directly as dataset.
%
%A PSR datatype must be used as an input (e.g. ShDBZ\_MS).
%
%The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters.


\subsubsection{PSR\_MERGE}
\label{subsec_psr_merge}

%Merge two spectra with different PRF to one spectrum. The result is another
%PSR dataset with half the number of (azimuth, elevation, range) tuples but
%a larger spectrum per (azimuth, elevation, range) tuple.
%
%As input datatype an unfolded complex spectrum must be selected (e.g. UhCPX\_MS).
%
%The general parameters \emph{type}, \emph{datatype}, \emph{ignore\_missing\_vols}
%and \emph{products} are not listed here, see Table~\ref{tab_product_config_params} for
%description of these parameters.

\subsubsection{PSR\_VERTICAL}
\label{subsec_psr_vertical}
% XXX to be described

\subsubsection{PSR\_SZH}
\label{subsec_psr_szh}
%Computes the spectral horizontal reflectivity from raw spectral data. It requires ShDBZ\_MS as input.

\subsubsection{PSR\_SZV}
\label{subsec_psr_szv}
%Computes the spectral vertical reflectivity from raw spectral data. It requires SvDBZ\_MS as input.

\subsubsection{PSR\_SZDR}
\label{subsec_psr_szdr}
%Computes the spectral differential reflectivity from raw spectral data. It requires ShDBZ\_MS and SvDBZ\_MS as inputs.

\subsubsection{PSR\_SZDR\_TEXT}
\label{subsec_psr_szdr_text}
%Computes the texture of the spectral differential reflectivity from raw spectral data. It requires ShDBZ\_MS and SvDBZ\_MS as inputs.

\subsubsection{PSR\_SRHOHV}
\label{subsec_psr_srhohv}
%Computes the spectral co-polar correlation coefficient. It requires ShCPX\_MS, SvCPX\_MS, ShNSADU\_MS, SvNSADU\_MS, NhADU and NvADU as inputs. If the integer variable NOISE\_CORRECTION is set to 1 a noise correction is performed. By default noise correction is performed.

\subsubsection{PSR\_SPHIDP}
\label{subsec_psr_sphidp}
%Computes the spectral differential phase from raw spectral data. It requires ShDEG\_MS and SvDEG\_MS as inputs.

\subsubsection{PSR\_SPHIDP\_TEXT}
\label{subsec_psr_sphidp_text}
%Computes the texture of the spectral differential phase from raw spectral data. It requires ShDEG\_MS and SvDEG\_MS as inputs.

\subsubsection{PSR\_DSD}
\label{subsec_psr_dsd}
%Estimates the drop size distribution (DSD) from clean spectral data. It requires sZh\_MS as input.

\subsection{ARRAY\_PSR Datasets}

\subsubsection{PSR\_FILTER}
\label{subsec_psr_filter}
%Computes the spectral polarimetric variables (sZh\_MS, sZdr\_MS, sRhoHV\_MS and sPhiDP\_MS) from raw spectra filtering out Doppler bins suspected to be clutter contaminated. As inputs it requires: ShCPX\_MS, SvCPX\_MS, ShNSADU\_MS, SvNSADU\_MS, NhADU\_MS, NvADU\_MS, ShDEG\_MS, SvDEG\_MS, ShDBZ\_MS and SvDBZ\_MS.

\subsubsection{PREPROC\_PSR}
\label{subsec_psr_preproc}
%Pre-processing of the spectral data. Computes the spectral polarimetric variables (sZh\_MS, sZv\_MS, sZdr\_MS, sRhoHV\_MS and sPhiDP\_MS) from raw spectra.

%The pre-processing performed is user selectable and can consist on 0-Doppler filtering, filtering based on the spectral polarimetric variables or both. Also selectable is the correction of noise for the spectral RhoHV.

%The output is an array of PSR data that contains the spectral polarimetric variables. The output PSR data is added to the PSR data to be processed and can be used by other functions specifying for example: PSRPROC:sZh\_MS. The user may decide not to issue any product for hits data set. The parameters for this function are summarized in Table~\ref{tab_dataset_preproc_psr}.

%\textbf{IMPORTANT: This dataset must be before any other data set so that the output volumes can be used by others.}

%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%datatype            & STRARR    & must contain the following: ShCPX\_MS, SvCPX\_MS, ShNSADU\_MS, SvNSADU\_MS, NhADU, NvADU, ShDEG\_MS, SvDEG\_MS, ShDBZ\_MS and SvDBZ\_MS.\\
%noise\_correction    & INT    & Possible values 0, 1. Default 1. If set performs noise correction when computing the spectral RhoHV.\\
%filter0D            & INT    & Possible values 0, 1. Default 0. If set filters the 0-Doppler and the two surrounding neighbours.\\
%filterspol            & INT    & Possible values 0, 1. Default 0. If set filters the spectrum according to thresholds on spectral polarimetric data.\\
%srhohv\_thld        & FLOAT    & Default 0.1. If filterspol is set data below this threshold is eliminated.\\
%szdr\_thld            & FLOAT    & Default -5. If filterspol is set data below this threshold is eliminated.\\
%szdrtext\_thld        & FLOAT    & Default 10. If filterspol is set data above this threshold is eliminated.\\
%sphidptext\_thld        & FLOAT    & Default 150. If filterspol is set data above this threshold is eliminated.\\
%\end{tabularx}
%\caption{Parameters of PREPROC\_PSR.}
%\label{tab_dataset_preproc_psr}
%\end{table}


\subsection{MONITORING Datasets}

\subsubsection{MONITORING}
\label{subsec_monitoring}

{\bf TODO -jgr-: just add a reference to latest Jordi documentation}

Polarimetric data quality monitoring. The inputs can be dB(u)Z(c), ZDR(c), uPhiDP, PhiDP(c), RhoHV(c) and ISO0. The function performs 4 different monitoring routines: 1) monitoring of the phidp offset, 2) monitoring of the Zdr in moderate rain (expected 0.2 dB), 3) monitoring of the 80th quantile in rain (expected well above 0.98), 4) monitoring of the Zh bias by means of self-consistency in rain. The routines are user selectable. By default all the monitoring routines are performed. The ISO0 information is used in monitoring routines 2 to 4. By default no monitoring is performed if ISO0 information is missing but the user may select to allow missing ISO0 volumes. The ISO0 is then assumed to be at a fix height of 2000 m. The user-selectable parameters for this function are summarized in Table~\ref{tab_dataset_monitoring}.

This process is intended to be performed off-line. It does not provide any output until all the volumes (Typically all the volumes generated in a day) have been processed. The output is a structure of type "MON" that contains general information of the volumes used (azimuth angles, elevation angles, range bins and range resolution), as well as the information for each polarimetric variable that has been processed (number of volumes used, time of each volume, space-time matrix with the data and number of samples and statistical parameters.

{\bf TODO: it seems that less parameters are now used. Correct? Which one is a good example as a config file? Checking now mals\_mei\_dataquality\_prod}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
IGNORE\_MISSING\_VOL         & INT     & Boolean (0,1), default: 0. If set to 1, preprocessing is performed despite missing volumes.\\

MONPHIDP0 & INT & Boolean (0,1), default: 1. If set to 1, Phidp offset monitoring is performed.\\

MONZDRBIAS & INT & Boolean (0,1), default: 1. If set to 1, monitoring of the Zdr in moderate rain is performed.\\

MONRHOAV & INT & Boolean (0,1), default: 1. If set to 1, monitoring of the RhoHV value in rain is performed.\\

MONZHBIAS & INT & Boolean (0,1), default: 1. If set to 1, monitoring of the Zh bias is performed.\\

ALLOW\_MISSING\_ISO0 & INT & Boolean (0,1), default 0. If set to 1, monitoring is performed even if ISO0 volumes are missing. The ISO0 height is assume to be 2000 m\\

ZDRBIAS0 & FLOAT & Default: 0. ZDR bias. This parameter is used in the monitoring of Zdr when ZDRc is the input to uncorrect for any possible bias that has been previously corrected\\

ZDRBIAS0 & FLOAT & Default: 0. Zh bias. This parameter is used in the monitoring of Zh bias when dBZc is the input to uncorrect for any possible bias that has been previously corrected\\
\end{tabularx}
\caption{Parameters of MONITORING (without the general parameters).}
\label{tab_dataset_monitoring}
\end{table}




\subsection{ARRAY\_VOL Datasets}

\subsubsection{PREPROCESSING}
\label{subsec_preprocessing}

{\bf TODO: is this replaced by the ``processing levels'' somehow? Should check one by one the preprocessing here (IDL) to see the equivalent in pyrad -jgr- -fvj-}

Pre-processing of the raw polarimetric data. The inputs can be dB(u)Z, dBZ(u)v, ZDR, (u)PhiDP, RhoHV, KDP, CDR and the auxiliary volumes SNRh (used in phidp processing), ISO0 (used in attenuation correction processing) and VIS (used for partial beam blockage correction).


The pre-processing performed is user selectable and can consist in clutter suppression,  partial beam blocking correction, Zdr and Zh bias correction,  kdp and phidp retrievals and/or attenuation correction.


The output is an array of volumes that may contain some or all of these data types: dBZc, dBZvc, ZDRc, PhiDPc, KDPc, RhoHVc, CDRc, Ah or Adp, depending on the user selected processing and whether it has been successful\footnote{Note the suffix -c- in processed data.}.
The output volumes are added to the raw volumes to be processed and can be used by other functions specifying for example: PROC:dBZc
The user may decide not to issue any product for this data set. The parameters of PREPROCESSING are listed in Table~\ref{tab_dataset_preprocessing}.


\textbf{IMPORTANT: This dataset must be processed right after the sanity volume and before any other data set so that the output volumes can be used by others.}


\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
IGNORE\_MISSING\_VOL         & INT     & Boolean (0,1), default: 0. If set to 1, preprocessing is performed despite missing volumes.\\

CLUTTERSUPPRESSION & INT & Boolean (0,1), default: 0. If set to 1, clutter suppression is performed.\\

VISIBILITYCORRECTION & INT & Boolean (0,1), default: 0. If set to 1, partial beam blockage correction is performed.\\

VISMIN & FLOAT & Possible values: 0 to 100. default: 0. Minimum visibility. Any range bin that has a lower visibility than this value will be set to -INF.\\

BIASCORRECTION & INT & Boolean (0,1), default: 0. If set to 1, dBZ and ZDR are corrected with the value specified by the user.\\

ZDRBIAS0 & FLOAT & ZDR bias in dB\\

ZHBIAS0 & FLOAT & dBZ bias in dBZ\\

DOKDPPHIDP & INT & Boolean (0,1). If set to 1, uPhiDP is processed to get PhiDP and KDP. \textbf{If set, any parameter accepted by the ARRAY\_VOL-PHIDP\_KDP dataset, can be passed to define and tune the estimation methods (refer to Section~\ref{subsec_phidp_kdp})}.\\

ATTENUATIONENABLE & INT & Boolean (0,1). If set to 1, dBZ and ZDR are corrected for rain-induced attenuation. \textbf{If set, any parameter accepted by the ARRAY\_VOL-ATTENUATION dataset, can be passed to define and tune the methods (refer to Section~\ref{subsec_attenuation})}.\\

\end{tabularx}
\caption{Parameters of PREPROCESSING (without the general parameters).}
\label{tab_dataset_preprocessing}
\end{table}

An example of application of PREPROCESSING, inside a product configuration file is the following one:

\begin{verbatim}
preprocessing STRUCT 9
   TYPE STRING PREPROC
   DATATYPE STRARR 6
      dBZ
      ZDR
      RhoHV
      PhiDP
      KDP
      COSMO:ISO0
   IGNORE_MISSING_VOLS INT 1
   CLUTTERSUPPRESSION INT 1
   DOKDPPHIDP INT 0
   ATTENUATIONENABLE INT 1
   ATTCORRMETHOD STRING zphi
   BIASCORRECTION INT 1
   ZDRBIAS0 FLOAT 0.2
\end{verbatim}


\subsubsection{MEANZ}
\label{subsec_meanz}

{\bf TODO: outdated?}

%Computes the average reflectivity, reflectivity-weighted average differential phase and a volume with flags indicating the clutter and attenuation suffered by each radar bin within the averaging period. The inputs are dB(u)Z(v)(c) and (u)PhiDP(c). This information is used for the inter-comparison between radars. This process is meant to be performed off-line. The parameters of MEANZ are listed in Table~\ref{tab_dataset_meanz}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%PERIOD & FLOAT & The period of time averaged [s]. Default:3600\\
%STARTAVERAGE & STRING & The starting time of the average (format YYYYMMDDhhmmss). Default: the start time of the first volume processed\\
%\end{tabularx}
%\caption{Parameters of MEANZ.}
%\label{tab_dataset_meanz}
%\end{table}

\subsubsection{XVSC\_POSITION}
\label{subsec_xvsc_position}

{\bf TODO: outdated? or replaced by something with different name?}

%Checks for collocated range bins with good characteristics to be used in radar intercomparison. The processed radar acts as master while the radars listed are slaves. The input is the averaged reflectivity volume obtained by the MEANZ dataset. The pair of coordinates (elevation angle index, range index, azimuth index) is stored in a text file. Additionally a volume array is generated with a volume for each compared radar where the usable range bins have the code 1 and the rest have the code 0. The user definable parameters of this dataset are listed in Table~\ref{tab_dataset_xvsc_position}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%RADAR & STRARR & List of radars where to look for collocated range bins.\\
%RADARRES & STRING & radar resolution (L or H)\\
%RMIN & FLOAT & minimum range from master radar where to look for a range bin [m]\\
%RMAX & FLOAT & maximum range from master radar where to look for a range bin [m]\\
%AZMIN & FLOAT & minimum azimuth from master radar where to look for a range bin [Deg]\\
%AZMAX & FLOAT & maximum azimuth from master radar where to look for a range bin [Deg]\\
%ELMIN & FLOAT & minimum elevation from master radar where to look for a range bin [Deg]\\
%ELMAX & FLOAT & maximum elevation from master radar where to look for a range bin [Deg]\\
%\end{tabularx}
%\caption{Parameters of XVSC\_POSITION.}
%\label{tab_dataset_xvsc_position}
%\end{table}


\subsubsection{ATTENUATION}
\label{subsec_attenuation}

{\bf TODO: (1) checking the function in process\_phase.py (function named process\_attenuation.py) it seems that now only zphi can be used. Correct? (2) check if input parameters in table below are outdated. It seems so. }

%Estimation of the precipitation-induced horizontal specific attenuation and differential specific attenuation using one of the following three methods: a method based on self-consistency, the zphi method and a linear dependency with the differential phase. Correction for attenuation of the reflectivity and differential reflectivity. Each attenuation method requires different inputs. For the self-consistency the inputs are dB(u)Z(c) and ZDR(c), for the zphi the inputs are dB(u)Z(c) and PhiDP(c) whereas for the linear dependency with the differential phase the inputs is PhiDP(c). The estimated attenuation is then used to correct the horizontal reflectivity and differential reflectivity if they are present. The correction is performed only below the ISO0 level. If no ISO0 volume is provided the correction is performed over the entire volume.
%The dataset output contains the following volumes: attenuation corrected horizontal reflectivity (dBZAttCorr), horizontal specific attenuation (Ah), path integrated attenuation (PIA), attenuation corrected differential reflectivity (zdrAttCorr), specific differential attenuation (Adp) and path integrated differential attenuation (PIDA). Not all the volumes may be necessarily present at the output.
The parameters for this dataset are listed in Table~\ref{tab_dataset_attenuation}.

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
attcorrmethod & STRING & The attenuation estimation method. One of the following: selfcons, zphi, philinear\\
mu & FLOAT & Only for selfcons method. The assumed mu parameter of the gamma distribution\\
zhbias0 & FLOAT & Only for selfcons method. The Zh bias to be corrected before applying the method\\
zdrbias0 & FLOAT & Only for selfcons method. The Zdr bias to be corrected before applying the method\\
phiparammethod & STRING & Possible: MFranceX, MFranceC, MFranceS, RyzhkovX. Default MFranceX. Selects the parameters for attenuation correction\\

\end{tabularx}
\caption{Parameters of ATTENUATION.}
\label{tab_dataset_attenuation}
\end{table}

\subsubsection{HYDROCLASS}
\label{subsec_hydroclass}

{\bf TODO: here now is replaced by semisupervised, right? How can i find proper parameters?}


Hydrometeor classification performed with a selected method (among the available ones). Hydrometeor classification maps a set of volume inputs (radar-based or from external sources) into a discrete set of hydrometeor classes (indicated with integers). Each method has its own conventions.

This dataset is an array\_volume because side products may be provided: for instance the uncertainty of classification, the second-likely hydrometeor class and so on.
%The parameters of a \emph{HYDROCLASS} dataset are listed in Table~\ref{tab_dataset_hydroclass}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%datatype         & STRARR     & Different classification methods require different inputs. Input volumes are:
%                              dBZ (or dBuZ or dBZc)$^{1,2,3}$, ZDR (or ZDRc)$^{1,2,3}$, PhiDP (or PhiDPc)$^{1}$,
%                              KDP (or KDPc)$^{1,2,3}$, RhoHV (or RhoHVc)$^{1,2,3}$, SNRh$^{1}$, VIS$^{1}$,
%                               TEMP$^{1,2,3}$, ISO0$^{1}$.\\
%
%hydroclassmethod & STRING      & Hydrometeor classification method chosen.
%                                 Default is 'FUZZY\_LOGIC'. Possible choices are:
%                                 \begin{itemize}
%                                    \item[1] 'FUZZY\_LOGIC': fuzzy logic method developed by J. Figueras (fvj).
%                                    \item[2] 'DOLAN\_2009\_MOD': Adaptation of a simple (1D) fuzzy logic algorithm
%                                               developed for X-band (Dolan and Rutledge, 2009)
%                                    \item[3] 'CLUSTERS\_GRAZIOLI\_2015\_MOD': Simplified final product of a
%                                           clustering
%                                           approach to hydrometeor classification (Grazioli et al, 2009)
%                                 \end{itemize}\\
% MAKE\_GLOBAL     & INT       & OPTIONAL. If set to 1, the HYDROCLASS volume
%                                    (note, not the ARRAY\_VOLUME) is made global and can be
%                                    used for the input processing for other datasets.
%                                    By default, this option is not set.\\
%
%\end{tabularx}
%\caption{Parameters of a HYDROCLASS dataset (without the general parameters).}
%\label{tab_dataset_hydroclass}
%\end{table}
%
%The main datatype/voltype that might be present in the output of HYDROCLASS (i.e., the different volumes contained in the ARRAY\_VOL and that may be used to generate products) are listed Table~\ref{tab_dataset_hydroclass_voltype}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{datatype}  & \bf{Method}  & \bf{Description}\\
%   TYPE               &    1         &  Hydrometeor type\\
%   TYPEDOL2009        &    2         &  Hydrometeor type\\
%   TYPECLUS           &    3         &  Hydrometeor type\\
%   PROB               &    1,2,3     &  Probability or expected accuracy of the classification\\
%   TYPECLUS           &    3         &  Hydrometeor type\\
%   XXX-other ones     &    1         &   XXX\\
%\end{tabularx}
%\caption{Main voltypes/datatypes that may be present in the output volume array of the HYDROCLASS dataset. The labels 1,2,3\dots in the ``Method'' column refer to the hydroclassmethod of Table~\ref{tab_dataset_hydroclass}}
%\label{tab_dataset_hydroclass_voltype}
%\end{table}

\subsubsection{PHIDP\_KDP}
\label{subsec_phidp_kdp}

{\bf TODO: in general, does still hold the definition of ARRAY\_VOL dataset?}
{\bf TODO2: this should be splitted in all the methods -jgr-. Need some support from -fvj- on how to find the accepted parameters with some certainty. }

K$_{dp}$ and $\Phi_{dp}$ estimated from noisy  $\Psi_{dp}$ ($\Psi_{dp}$ includes two unwanted components: (i) system noise, and (ii) differential phase shift upon backscattering $\delta_{hv}$). Usually $\Phi_{dp}$ is estimated first, and then $K_{dp}$ in series. Any combination of $\Phi_{dp}$ and K$_{dp}$ methods can be used. This dataset expects a sanity volume. This ARRAY\_VOL dataset is composed by the KDP volume (datatype 'KDP') and PHIDP volume (datatype 'PHIDP').

%The parameters of a \emph{PHIDP\_KDP} dataset are listed in Table~\ref{tab_dataset_phidp_kdp}. {\bf Note that if phidpprocess is set to ``HUBBERT1995\_MOD'' is a double window method with different defaults with respect to the other ones. For this method only the default values of {\it phidpwindsizes} and {\it phidpwindsizel} are 500\,m and 3000\,m respectively.}
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{1.1\textwidth}{llX}
%\bf{Parameter}    & \bf{Type}  & \bf{Description}\\
%datatype          & STRARR     & The estimation of $\Phi_{dp}$ and K$_{dp}$ is based on 4 rainbow
%                              raw volume datatypes: uPhiDP, PhiDP, dBZ (or dBuZ), SNRh.\\
%phidpprocess      & STRING     & $\Phi_{dp}$ estimation method chosen. Defaul is ``KALMAN''.
%                                 All the methods listed here, except when indicated, apply offset correction,
%                                 clutter censoring and SNR censoring.
%                                 Possible choices are:
%                                 \begin{itemize} [noitemsep,topsep=0pt,parsep=0pt,partopsep=0pt]
%                                    \item ``NONE'':          $\Phi_{dp}$ untreated.
%                                    \item ``RAVIS'':          $\Phi_{dp}$ is taken from PhiDP input vol.
%                                    \item ``OFFSET\_ONLY'':  offset correction, SNR censoring.
%                                    \item ``OFFSET\_AND\_CLUTTER'':  offset correction, SNR censoring, clutter censoring.
%                                    \item ``KALMAN'':        Kalman Filter (Schneebeli, 2014) estimation.
%                                    \item `` MEDIAN'':       Moving window median filter.
%                                    \item ``MEDIAN2W'':      Moving double window median filter.
%                                    \item ``MULTISTEP'':     Moving window range derivative estimation of
%                                                             $K_{dp}$ and reconstruction of $\Phi_{dp}$
%                                                             (Vulpiani, 2012).
%                                    \item ``HUBBERT1995\_MOD'' Modified version of FIR filter of Hubbert \& Bringi, 1995. Their idea is kept but the tools are different.
%                                  \end{itemize}\\
%kdpprocess        &  STRING     &  K$_{dp}$ estimation method chosen. Defaul is ``KALMAN''.
%
%                                 \begin{itemize} [noitemsep,topsep=0pt,parsep=0pt,partopsep=0pt]
%                                    \item ``DERIVATION'':   Simple derivation of $\Phi_{dp}$.
%                                    \item ``DERIVATION2'':  Derivation of a $\Phi_{dp}$ estimated with
%                                                            a double-window method (i.e. MEDIAN2W).
%                                    \item ``LINFIT'':       Single window piecewise linear fit.
%                                    \item ``LINFIT2'':      Double window piecewise linear fit.
%                                    \item ``LINFIT3'':      Triple window piecewise linear fit.
%                                    \item ``MULTISTEP'':     Moving window range derivative estimation of
%                                                             $K_{dp}$ (Vulpiani, 2012).
%                                     \item ``LEASTSQUARE'': Least square single window fit.
%                                     \item ``LEASTSQUARE2'':Least square double window fit.
%                                     \item ``KALMAN'':      Kalman Filter (Schneebeli, 2014) estimation.
%                                  \end{itemize}\\
%
%snrmin            & FLOAT      & Threshold  in SNRh to censor data of poor quality. Default 10 dB.\\
%intkdp            & INT        & Flag. If set to 1, the final $\Phi_{dp}$ is re-built from $K_{dp}$. Default 0.\\
%phidpniterations  & INT        & Number of iterations for iterative $\Phi_{dp}$ estimation methods.
%                                 Default 10.\\
%kdpniterations    & INT        & Number of iterations for iterative K$_{dp}$ estimation methods (i.e. MULTISTEP).
%                                 Default 3.\\
%Rcov\_file        & STRING     & File name (with full path) of the Rcov matrix used in the KALMAN method.
%                                 Default values are included.\\
%Pcov\_file         & STRING    & Same as above, for Pcov.\\
%phidpwindsize     & FLOAT      & Estimation window for single-window $\Phi_{dp}$ methods. Default 2000 m.\\
%phidpwindsizes     & FLOAT     & Short  window for double-window $\Phi_{dp}$ methods. Default 1000 m.\\
%phidpwindsizel     & FLOAT     & Long  window for double-window $\Phi_{dp}$ methods. Default 2000 m.\\
%phidpzhmin         & FLOAT     & Reflectivity threshold to guide the choice of the window in double window
%                                 $\Phi_{dp}$ methods. Default 30 dBZ.\\
%kdpwindsize      & FLOAT     & Estimation window for single-window K$_{dp}$ methods. Default 2000 m.\\
%kdpwindsizes     & FLOAT     & Short  window for double-window K$_{dp}$ methods. Default 1000 m.\\
%kdpwindsizel     & FLOAT     & Long  window for double-window K$_{dp}$ methods. Default 3000 m.\\
%kdpwindsizei     & FLOAT     & Intermediate  window for triple-window K$_{dp}$ methods. Default 1500 m.\\
%kdpzhmin         & FLOAT     & Reflectivity threshold to guide the choice of the window in double window
%                                 K$_{dp}$ methods or between the long and intermediate windows in triple window methods. Default 30 dBZ.\\
%kdpzhmin2         & FLOAT     & Reflectivity threshold choose the window in triple window
%                                 K$_{dp}$ methods between the intermediate and short windows. Default 45 dBZ.\\
%band        & STRING & Default X. The frequency band of the radar (X, C, or S).\\
%
%\end{tabularx}
%\caption{Parameters of a PHIDP\_KDP dataset (without the general parameters).}
%\label{tab_dataset_phidp_kdp}
%\end{table}
%
%\subsubsection{PSR\_POLVARIABLES}
%\label{subsec_psr_polvariables}
%Computes the polarimetric variables (dBZ, ZDR, RhoHV, uPhiDP, V and W) from clean spectral polarimetric variables (PSRPROC:sZh\_MS, PSRPROC:sZv\_MS, PSRPROC:sRhoHV\_MS and PSRPROC:sPhiDP\_MS).
%
%\subsubsection{PSR\_DSDBASED\_PARAM}
%\label{subsec_psr_dsdbased_param}
%Computes parameters based on the integral of the DSD (LWC and RR\_DSD) from clean spectral polarimetric variable PSRPROC:sZh\_MS.

{\bf HERE HERE HERE}

\subsection{SUN\_MONITORING Datasets}

\subsubsection{SUN\_MONITORING}
\label{subsec_sun_monitoring}

{\bf TODO: substituded by ``sun\_hits'', right?}


%Collects sun hits data and stores it in a text file with the following information: time in format YYYYYMMDDhhmmss, radar elevation angle [Deg], radar azimuth angle [Deg], sun elevation angle (respect to radar) [Deg], sun azimuth angle (respect to radar) [Deg], estimated sun power at the horizontal channel [dBm], standard deviation of the estimated sun power at the horizontal channel [dB], estimated sun power at the vertical channel [dBm], standard deviation of the estimated sun power at the vertical channel [dB], estimated differential reflectivity of the sun hit [dB], standard deviation of the estimated differential reflectivity of the sun hit [dB], number of samples used in the computation of the sun power at the horizontal channel, number of samples used in the computation of the sun power at the vertical channel, number of valid range bins, total number of range bins.
%
%If a potential sun hit is detected, the following data is stored in a volume array structure and can be visualized: received power at the horizontal channel [dBm], received power at the vertical channel [dBm], Zdr [dB], detected sun spike at the horizontal channel, detected sun spike at the vertical channel.
%
%This dataset is meant to be collected offline (typically in spans of 1 day). At the end of the period, a fitting of the data is performed and the following information is stored in a text file: starting date of the sun monitoring [YYYYMMDD], number of sun hits, elevation beam width of the horizontal channel [Deg], azimuth beam width of the horizontal channel [Deg], elevation beam width of the vertical channel [Deg], azimuth beam width of the vertical channel [Deg], elevation bias [Deg], azimuth bias [Deg], estimated sun power at the horizontal channel [dBm], standard deviation of the estimated sun power at the horizontal channel [dB], estimated sun power at the vertical channel [dBm], standard deviation of the estimated sun power at the vertical channel [dB], estimated differential reflectivity of the sun [dB], standard deviation of the differential reflectivity of the sun [dB]. The list of parameters that control this data set can be seen in Table~\ref{tab_dataset_sun_monitoring}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%type                & STRING    & Must be SUN\_MONITORING\\
%datatype            & STRARR    & It must have 3 volume data sets: dBuZ, dBuZv and ZDRu.\\
%delta\_elev\_max    & FLOAT     & maximum difference between the computed sun elevation and the read radar elevation [Deg]. Default 2\\
%delta\_azim\_max      & FLOAT    & maximum difference between the computed sun azimuth and the read radar azimuth [Deg]. Default 2\\
%azimwidth\_h         & FLOAT & expected horizontal channel azimuth beam width [Deg]. Default 0. If this parameter and the following ones are set to a number greater than 0 the fitting is performed with 3 parameters. Otherwise it is performed with 5.\\
%elevwidth\_h         & FLOAT & expected horizontal channel elevation beam width [Deg]. Default 0.\\
%azimwidth\_v         & FLOAT & expected vertical channel azimuth beam width [Deg]. Default 0.\\
%elevwidth\_v         & FLOAT & vertical channel elevation beam width [Deg]. Default 0.\\
%\end{tabularx}
%\caption{Parameters of SUN\_MONITORING.}
%\label{tab_dataset_sun_monitoring}
%\end{table}


\subsection{XVSC Datasets}

\subsubsection{XVSC}
\label{subsec_xvsc}

{\bf TODO: is it outdated?}
%Compares the averaged reflectivity of two radars at collocated points. The radar being processed is the master while the listed radars for comparison are the slaves. This dataset makes use of the output of MEANZ and the list of collocated points obtained by XVSC\_POSITION. The points used in the comparison are stored in a text file with the following information: time in format YYYYYMMDDhhmmss, elevation, range and azimuth indices of the master radar, averaged reflectivity, averaged Phidp and flag number of master radar, elevation, range and azimuth indices of slave radar, averaged reflectivity, averaged Phidp and flag number of slave radar. The list of parameters for this dataset can be seen in Table~\ref{tab_dataset_xvsc}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%RADAR         & STRARR     & list of radars that are compared to processed radar (Ex. D, MXPOL, etc.).\\
%
%RADARRES & STRING & Radar resolution (H or L).\\
%\end{tabularx}
%\caption{Parameters of XVSC.}
%\label{tab_dataset_xvsc}
%\end{table}


\subsection{INTERCOMP Datasets}

\subsubsection{INTERCOMP}
\label{subsec_intercomp}

{\bf TODO: i found INTERCOMP in the function process\_calib.py but still would like to find a way to understand all the parameters that are accepted through config file (similar question for other datasets/products). Could not find an example of this dataset in the config files. }


Compares a polarimetric variable of a master radar with a slave radar. The data type can be any data type recognized by both radars. This dataset makes use of the list of collocated points obtained by XVSC\_POSITION. The points used in the comparison are stored in a text file with the following information: time in format YYYYYMMDDhhmmss, elevation, range and azimuth indices of the master radar, polarimetric variable value of master radar, elevation, range and azimuth indices of slave radar, polarimetric variable value of slave radar. The list of parameters for this dataset can be seen in Table~\ref{tab_dataset_intercomp}.

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{llX}
\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
RADAR         & STRARR     & list of radars that are compared to processed radar (Ex. D, MXPOL, etc.).\\
RADARRES & STRING & Radar resolution (H or L).\\
ScanList & STRARR & List of MXPOL radar scans where to look for data.\\
\end{tabularx}
\caption{Parameters of INTERCOMP.}
\label{tab_dataset_intercomp}
\end{table}

\subsubsection{INTERCOMP\_TIME\_AVG}
\label{subsec_intercomp_time_avg}

{\bf TODO: add description (novelty with respect to IDL?)}


\subsection{HISTOGRAM Datasets}

\subsubsection{HISTOGRAM}
\label{subsec_histogram}

{\bf TODO: does this still exist as dataset or is it a product?}

%Computes 1D and 2D histograms of polarimetric data obtained over a period of time. The data can be filtered according to various criteria. The dataset requires at least two different inputs and depending on the filtering criteria auxiliary data is also required. The filtering flags are listed in table~\ref{tab_dataset_histogram}.
%
%\begin{table}[H]
%\rowcolors{1}{darkgray}{lightgray}
%\begin{tabularx}{\textwidth}{llX}
%\bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%snrmin         & FLOAT     & Minimum SNR [dB]\\
%snrmax         & FLOAT     & Maximum SNR [dB]\\
%rmin         & FLOAT     & Minimum range [m]\\
%rmax         & FLOAT     & Maximum range [m]\\
%azmin         & FLOAT     & Minimum azimuth [Deg]\\
%azmax         & FLOAT     & Maximum azimuth [Deg]\\
%hmin         & FLOAT     & Minimum height [m MSL]\\
%hmax         & FLOAT     & Maximum height [m MSL]\\
%echotype    & INT     & type of echo to keep. 0: keep weather, 1: keep clutter\\
%iso0pos   & INT       & data to keep regarding the position of the beam respect to the ISO0. 0: beam below ISO0, 1: ISO0 within the beam, 2: beam above ISO0\\
%tempmin & FLOAT   & minimum temperature [Deg C]\\
%tempmax & FLOAT & maximum temperature [Deg C]\\
%mlpos     & INT    & position of the beam respect to the melting layer: 1 full beam below melting layer, 2 from pos 1 to beam axis at bottom of melting layer, 3 from pos 2 to beam axis at top of melting layer, 4 from pos 3 to full beam above the melting layer, 5 full beam above melting layer\\
%hydrotype & INT & hydrometeor type: 0 no classification, 1 graupel, 2 hail, 3 ice crystals, 4 wet snow, 5 dry snow, 6 rain\\
%\end{tabularx}
%\caption{Parameters of HISTOGRAM.}
%\label{tab_dataset_histogram}
%\end{table}


\subsection{COMPOSITE\_VOLUME datasets}
  \label{subsec_composite_volume_dataset}
  
 {\bf TODO: check how this would fit in the context of pyrad.} 
%Composite volumes are nothing but the combination of two VOL datasets within the same data structure. Their main goal is to group together PPI VOL datasets with RHI VOL datasets that cannot otherwised be merged in a single VOL structure. COMPOSITE\_VOLUME is a beta feature at the current revision state (0.4.5) and for instance SANITY VOL (\ref{subsec_san}) cannot be applied nor composed together yet. Other limitations on some VOL datasets may apply.




\newpage

% ---------------------------------------------------------------------------------
% Products
% ---------------------------------------------------------------------------------
\section{Products}
\label{sub_products}

For each dataset format several products can be generated.
The following tables list the possible products for each dataset format.

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name}      & {\bf Description}                      & {\bf Reference}\\
PPI\_IMAGE      & PPI image of constant elevation        & Section~\ref{subsec_ppi_image}\\
PPI\_MAP        & PPI image on a map                     & {\bf TODO: describe it} \\
PSEUDOPPI\_IMAGE  & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
PSEUDOPPI\_MAP  & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
RHI\_IMAGE      & RHI image of constant azimuth          & Section~\ref{subsec_rhi_image}\\
RHI\_PROFILE    & Averaged height profile                & Section~\ref{subsec_rhi_profile}\\
PSEUDORHI\_IMAGE   & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
CAPPI\_IMAGE        & Constant altitude PPI image            & Section~\ref{subsec_cappi}\\
PLOT\_ALONG\_COORD & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
BSCOPE\_IMAGE & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
TIME\_RANGE & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
HISTOGRAM & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
QUANTILES & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
FIELD\_COVERAGE & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
CDF & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
SAVEVOL         & Save the generated dataset volume        & Section~\ref{subsec_savevol}\\
SAVEALL & {\bf TODO: describe}                 & {\bf TODO: describe it} \\
SAVESTATE       & Save the time of the processed volume. & Section~\ref{subsec_savestate}\\
& {\bf TODO: check -jgr- and -fvj- all the products below, what to do.} & \\

WGS84\_IMAGE    & Image in WGS84 coordinates {}          & Section~\ref{subsec_wgs84_image}\\
CH1903\_IMAGE   & Image in Swiss coordinates             & Section~\ref{subsec_ch1903_image}\\

CAPPI\_ASCII    & XXX to be described                    & Section~\ref{subsec_CAPPI_ASCII}\\
PLOT\_LINES     & Plot values along a coordinate, holding
                  the other two fixed.                   & Section~\ref{subsec_plot_lines}\\
CDF\_STAT       & Cumulative distribution function       & Section~\ref{subsec_cdf_stat}\\

NETCDF\_CONV    & Save data in netcdf file format        & Section~\ref{subsec_netcdf_conv}\\
MELTLAYER\_IMAGE &   Azimuth-Height graphic indicating the
                  areas suspected to belong to the melting layer & Section~\ref{subsec_meltlayer_image}\\
MELTLAYER\_TS   & Time series plot with the evolution
                  of the melting layer.                  & Section~\ref{subsec_meltlayer_ts}\\
SAVE\_DEM       & Save a PPI in DEM format.              & Section~\ref{subsec_SAVE_DEM}\\
RNGVSANG\_IMAGE & Range versus angle image at a particular
                  elevation or azimuth.                  & Section~\ref{subsec_rngvsang}\\
SAVESLICE\_PPI\_ASCII & XXX to be described              & Section~\ref{subsec_SAVESLICE_PPI_ASCII}\\
CONST\_RANGE\_IMAGE & Make a azimuth elevation plot at
                  fixed range.                           & Section~\ref{subsec_CONST_RANGE_IMAGE}\\
CONTOUR\_RANGE\_IMAGE & make a contour plot (azimuth vs.
                  elevation) at a fixed range gate       & Section~\ref{subsec_CONTOUR_RANGE_IMAGE}\\
CONTOUR\_RANGE\_IMAGE\_3D & make a contour plot (azimuth
                  vs. elevation) at a fixed range gate   & Section~\ref{subsec_CONTOUR_RANGE_IMAGE_3D}\\
WRITE\_BIN      & Write bin values to a file.            & Section~\ref{subsec_WRITE_BIN}\\
WRITE\_MEAN     & Write statistic values of a region to
                  a file.                                & Section~\ref{subsec_WRITE_MEAN}\\
\end{tabularx}
\caption{List of all possible product types for dataset with VOL or ARRAY\_VOL format}
\label{tab_products_VOL}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
WRITE\_SUN\_HITS & {\bf TODO: describe} & {\bf TODO} \\
PLOT\_SUN\_HITS & {\bf TODO: does it replace psunhits below?} & {\bf TODO} \\
WRITE\_SUN\_RETRIEVAL & {\bf TODO: describe} & {\bf TODO} \\
PLOT\_SUN\_RETRIEVAL & {\bf TODO: describe} & {\bf TODO} \\
PLOT\_SUN\_RETRIEVAL\_TS & {\bf TODO: describe} & {\bf TODO} \\

& {\bf TODO: check what to do with the IDL products below} & \\


PSUNHITS\_IMAGE    & Creates a 2D plot where the x axis is the difference between azimuth position of the radar and the azimuth position of the sun, the y axis is the difference between elevation position of the radar and elevation position of the sun and color coded us the estimated sun hits power          & Section~\ref{subsec_psunhits_image}\\
PSUNRETRIEVAL\_IMAGE    & As above but with the retrieved sun power        & Section~\ref{subsec_psunretrieval_image}\\
ZDRSUNHITS\_IMAGE    & As above but with the Zdr of the sun hits        & Section~\ref{subsec_zdrsunhits_image}\\
ZDRSUNRETRIEVAL\_IMAGE    & as above but with the retrieved Zdr of the sun  & Section~\ref{subsec_zdrsunretrieval_image}\\
SUNRETRIEVAL\_TS    & Plot a time series showing the evolution of a sun retrieval parameter        & Section~\ref{subsec_sunretrieval_ts}\\
\end{tabularx}
\caption{List of specific product types for dataset with SUN\_HITS format. In addition to them, all the product types for dataset with VOL format can be applied.}
\label{tab_products_SUN_MONITORING}
\end{table}


\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: outdated? or replaced?} & \\


POLAR\_AZ\_EL\_IMAGE  & A polar azimuth elevation plot             & Section~\ref{subsec_polar_az_el_image}\\
DISTANCE\_VS\_AZIMUTH\_IMAGE  & Make a 2D ``data'' vs azimuth plot & Section~\ref{subsec_distance_vs_azimuth_image}\\
QUANTILE\_STAT        & Make ``data'' vs azimuth statistics        & Section~\ref{subsec_quantile_stat}\\
\end{tabularx}
\caption{List of all possible product types for dataset with RAY format}
\label{tab_products_RAY}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\

PLOT\_AND\_WRITE\_POINT    & Plots a time series with the evolution of a variable at a particular point. Writes the same information in a file. & Section~\ref{subsec_plot_and_write_point}\\
PLOT\_CUMULATIVE\_POINT    & Plots a time series with the accumulation in time of a variable at a particular point.  & Section~\ref{subsec_plot_cumulative_point}\\
COMPARE\_POINT             & Time series plot showing the evolution of a radar variable and a variable from another sensor placed at a particular point. & Section~\ref{subsec_compare_point}\\
COMPARE\_CUMULATIVE\_POINT & Time series plot showing the accumulated value of a radar variable and a variable from another sensor placed at a particular point. & Section~\ref{subsec_compare_cumulative_point}\\
COMPARE\_TIME\_AVG & {\bf TODO} & {\bf TODO} \\
PLOT\_AND\_WRITE           & Make a plot of a timeseries. And write
                             the timeseries to a file.              & Section~\ref{subsec_plot_and_write}\\
\end{tabularx}
\caption{List of all possible product types for dataset with TIMESERIES format}
\label{tab_products_TIMESERIES}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: is it still of interest? is it replaced by QVP? } & \\
TIME\_ARRAY\_IMAGE & Plot time-array plot (e.g. a time-height
                     array).                                  & Section~\ref{subsec_time_array_image}\\
TIME\_ARRAY\_FILE & XXX to be described & Section~\ref{subsec_time_array_file}\\
\end{tabularx}
\caption{List of all possible product types for dataset with TIMEARRAY format}
\label{tab_products_TIMEARRAY}
\end{table}


\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: is it still of interest? } & \\

TIME\_ARRAY\_IMAGE & Plot time-array plot (e.g. a time-height
                     array).                                  & Section~\ref{subsec_time_array_array_image}\\

TIME\_ARRAY\_MAP   & Plot time-array on a map & Section~\ref{subsec_time_array_map}\\
\end{tabularx}
\caption{List of all possible product types for dataset with TIMEARRAY\_ARRAY format}
\label{tab_products_TIMEARRAY_array}
\end{table}


\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: now TRAJ and TRAJ\_ONLY are merged in Pyrad, right?} & \\
TRAJ\_PLOT    & Plot the range, elevation, azimuth of a plane
                trajectory.                            & Section~\ref{subsec_traj_plot}\\
TRAJ\_TEXT    & Write the range, elevation, azimuth of a plane
                trajectory to a text file.             & Section~\ref{subsec_traj_text}\\
TRAJ\_ANTENNA & Plot the radar antenna movement.       & Section~\ref{subsec_traj_antenna}\\
TRAJ\_DX50\_ANTENNA\_HITS & Compare the DX50 antenna movement
                with a plane trajectory. Possible hits are
                listed.                                & Section~\ref{subsec_traj_dx50_antenna_hits}\\
\end{tabularx}
\caption{List of all possible product types for dataset with TRAJ\_ONLY format}
\label{tab_products_TRAJ_ONLY}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: of interest?} & \\

RHI\_TRAJ     & Overplot the trajectory over a RHI image
                with azimuth according to the planes
                azimuth angle.                         & Section~\ref{subsec_rhi_traj}\\
PPI\_TRAJ     & Overplot the trajectory over a PPI image
                with elevation according to the planes
                elevation angle.                       & Section~\ref{subsec_ppi_traj}\\
\end{tabularx}
\caption{List of all possible product types for dataset with TRAJ\_VOL\_COMPOSITE format}
\label{tab_products_TRAJ_VOL_COMPOSITE}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: of interest?} & \\

SPECTRUM\_IMAGE & Plot of a single spectrum & Section~\ref{subsec_spectrum_image}\\
VERTICAL\_SPECTRUM\_IMAGE & XXX to be described & Section~\ref{subsec_VERTICAL_SPECTRUM_IMAGE}\\
SINGLE\_SPECTRUM\_IMAGE   & XXX to be described & Section~\ref{subsec_SINGLE_SPECTRUM_IMAGE}\\
SAVE\_PSR\_VOLUME         & XXX to be described & Section~\ref{subsec_SAVE_PSR_VOLUME}\\
SPEC\_ALONG               & Plot the spectrum along the range, along
                            the azimuth or along an elevation  & Section~\ref{subsec_SPEC_ALONG}\\
IQ\_ALONG               & Plot the IQ data along the range, along
                            the azimuth or along an elevation  & Section~\ref{subsec_iq_along}\\
\end{tabularx}
\caption{List of all possible product types for dataset with PSR format}
\label{tab_products_PSR}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
VOL\_HISTOGRAM & {\bf TODO: describe} & {\bf TODO: describe} \\
PPI\_HISTOGRAM & {\bf TODO: describe} & {\bf TODO: describe} \\
ANGULAR\_DENSITY & {\bf TODO: describe} & {\bf TODO: describe} \\
VOL\_TS & {\bf TODO: describe} & {\bf TODO: describe} \\
SAVEVOL & {\bf TODO: describe} & {\bf TODO: describe} \\

& {\bf TODO: check what to do with legacy products below} & \\

WRITE\_PHIDP0 & Writes the information of the monitoring of the differential phase offset. & Section~\ref{subsec_WRITE_PHIDP0}\\
WRITE\_ZDRBIAS & Writes the information of the monitoring of the Zdr value in moderate rain. & Section~\ref{subsec_WRITE_ZDRBIAS}\\
WRITE\_RHOAV & Writes the information of the monitoring of the Rhohv in rain. & Section~\ref{subsec_WRITE_RHOAV}\\
WRITE\_ZHBIAS & Writes the information of the monitoring of the reflectivity bias. & Section~\ref{subsec_WRITE_ZHBIAS}\\
PLOT\_PHIDP0 & Plots the differential phase offset as a function of azimuth for one elevation. & Section~\ref{subsec_PLOT_PHIDP0}\\
PLOT\_ZDRBIAS & Plots the Zdr in moderate rain as a function of azimuth for one elevation. & Section~\ref{subsec_PLOT_ZDRBIAS}\\
PLOT\_ZHBIAS & Plots the Zh bias as a function of azimuth for one elevation. & Section~\ref{subsec_PLOT_ZHBIAS}\\
PLOT\_PHIDP0\_DAY\_TS & Plots the instantaneous evolution of the differential phase offset. & Section~\ref{subsec_PLOT_PHIDP0_DAY_TS}\\
PLOT\_ZDRBIAS\_DAY\_TS & Plots the instantaneous evolution of the Zdr in moderate rain. & Section~\ref{subsec_PLOT_ZDRBIAS_DAY_TS}\\
PLOT\_RHOAV\_DAY\_TS & Plots the instantaneous evolution of the RhoHV in rain. & Section~\ref{subsec_PLOT_RHOAV_DAY_TS}\\
PLOT\_ZHBIAS\_DAY\_TS & Plots the instantaneous evolution of the Zh bias. & Section~\ref{subsec_PLOT_ZHBIAS_DAY_TS}\\
PLOT\_AND\_WRITE\_PHIDP0\_TS & Plots the evolution on a daily basis of the phidp offset. Writes the same information in a file & Section~\ref{subsec_PLOT_AND_WRITE_PHIDP0_TS}\\
PLOT\_AND\_WRITE\_ZDRBIAS\_TS & Plots the evolution on a daily basis of the Zdr in moderate rain. Writes the same information in a file & Section~\ref{subsec_PLOT_AND_WRITE_ZDRBIAS_TS}\\
PLOT\_AND\_WRITE\_RHOAV\_TS & Plots the evolution on a daily basis of the RhoHV in rain. Writes the same information in a file & Section~\ref{subsec_PLOT_AND_WRITE_RHOAV_TS}\\
PLOT\_AND\_WRITE\_ZHBIAS\_TS & Plots the evolution on a daily basis of the Zh bias. Writes the same information in a file & Section~\ref{subsec_PLOT_AND_WRITE_ZHBIAS_TS}\\
\end{tabularx}
\caption{List of all possible product types for dataset with MONITORING format}
\label{tab_products_MONITORING}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: Are XVSC substituted/merged by INTERCOMP format?} & \\
PLOT\_INTERCOMP & scatter plot between the pairs of time-averaged reflectivity data at each (or all) elevations. Computation of various statistics & Section~\ref{subsec_products_PLOT_INTERCOMP}\\
PLOT\_AND\_WRITE\_INTERCOMP\_TS   & Computes various statistics and plots the daily evolution of the median bias & Section~\ref{subsec_products_PLOT_AND_WRITE_INTERCOMP_TS}\\
\end{tabularx}
\caption{List of all possible product types for dataset with XVSC format}
\label{tab_products_XVSC}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
PLOT\_INTERCOMP & scatter plot between the pairs of polarimetric data at each (or all) elevations. Computation of various statistics & Section~\ref{subsec_products_PLOT_INTERCOMP2}\\
\end{tabularx}
\caption{List of all possible product types for dataset with INTERCOMP format}
\label{tab_products_INTERCOMP}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: Are those merged in VOL?} & \\

WRITE\_2DHIST & writes a 2D histogram in a file & Section~\ref{subsec_products_WRITE_2DHIST}\\
PLOT\_2DHIST & plots a 2D histogram & Section~\ref{subsec_products_PLOT_2DHIST}\\
WRITE\_HIST & writes a 1D histogram in a file & Section~\ref{subsec_products_WRITE_HIST}\\
PLOT\_HIST & plots a 1D histogram & Section~\ref{subsec_products_PLOT_HIST}\\
\end{tabularx}
\caption{List of all possible product types for dataset with HISTOGRAM format}
\label{tab_products_HISTOGRAM}
\end{table}

\begin{table}[H]
\rowcolors{1}{darkgray}{lightgray}
\begin{tabularx}{\textwidth}{lXl}
{\bf Name} & {\bf Description} & {\bf Reference}\\
& {\bf TODO: what to do with them?} & \\

PPI\_RHI\_IMAGE   & Plot one PPI and up to 3 RHIs on the same image.    & Section~\ref{subsec_ppi_rhi_image}.\\
CELL\_3D\_IMAGE   & Plot in 3D composite volume data inside a bounding box centered along a given RHI direction
                                                                        & Section~\ref{subsec_cell_3d_image}.\\
RADAR\_3D\_IMAGE  & Plot  in 3D composite volume data over a given spatial domain
                                                                         & Section~\ref{subsec_radar_3d_image}\\
\end{tabularx}
\caption{List of all possible product types for COMPOSITE\_VOLUME datasets.}
\label{tab_products_composite_volume}
\end{table}

{\bf TODO: in Pyrad there are also: COLOCATED\_GATES\_PRODUCTS, QVP\_PRODUCTS, GRID\_PRODUCTS, COSMO\_COORD\_PRODUCTS. Clarify how those relate with the IDL framework.}

{\bf TODO: uncomment the description of the products below here, when defined which ones to keep}

\subsection{VOL Products}

%% \subsubsection{PPI\_IMAGE}
%% \label{subsec_ppi_image}

%% PPI image of constant elevation.

%% The parameters of a \emph{PPI\_IMAGE} product are listed in Table~\ref{tab_product_ppi_image}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{PPI\_IMAGE}.\\
%% anglenr        & INT        & Elevation number (starting with 0) of the PPI image
%%                               to generate.\\
%% voltype        & STRING     & REQUIRED for ARRAY\_VOL: A valid datatype string (i.e., KDP, KDPc, TYPE, dBZ\dots)\\
%% transparent    & INT        & OPTIONAL. It set to 1, the title, legend, frame and
%%                               all description is removed and the image background
%%                               is set to transparent. If not given or set to 0,
%%                               the image background is white.\\
%% NOSANITY       & INT        & If set to 1 and the sanity volume is available, the
%%                               sanity information (clutter, noise, melting layer) is
%%                               not added to the image.\\
%% \end{tabularx}
%% \caption{Parameters of a PPI\_IMAGE product.}
%% \label{tab_product_ppi_image}
%% \end{table}
%% The dimension and boundaries of the PPI image are set in the location configuration file (Sec.~\ref{subsec_location_config}).


%% \subsubsection{WGS84\_IMAGE}
%% \label{subsec_wgs84_image}

%% Image at constant height in WGS84 coordinates.

%% The parameters of a \emph{WGS84\_IMAGE} product are listed in Table~\ref{tab_product_wgs84_image}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE        & STRING    & Must be \emph{WGS84\_IMAGE}.\\
%% R\_TOL    & FLOAT       & Range tolerance when performing the interpolation [m]. Default 100.\\
%% AZ\_TOL        & FLOAT    & Azimuth tolerance when performing the interpolation [deg]. Default 0.5.\\
%% EL\_TOL        & FLOAT    & Elevation tolerance when performing the interpolation [deg]. Default 0.5.\\
%% ALTITUDE    & FLOAT    & Altitude plotted [m MSL]\\
%% \end{tabularx}
%% \caption{Parameters of a WGS84\_IMAGE product.}
%% \label{tab_product_wgs84_image}
%% \end{table}
%% The dimension and boundaries of the WGS84 image are set in the location configuration file (Sec.~\ref{subsec_location_config}).


%% \subsubsection{CH1903\_IMAGE}
%% \label{subsec_ch1903_image}

%% Image at constant height in Swiss coordinates.

%% The parameters of a \emph{CH1903\_IMAGE} product are listed in Table~\ref{tab_product_ch1903_image}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE        & STRING    & Must be \emph{WGS84\_IMAGE}.\\
%% R\_TOL    & FLOAT       & Range tolerance when performing the interpolation [m]. Default 100.\\
%% AZ\_TOL        & FLOAT    & Azimuth tolerance when performing the interpolation [deg]. Default 0.5.\\
%% EL\_TOL        & FLOAT    & Elevation tolerance when performing the interpolation [deg]. Default 0.5.\\
%% ALTITUDE    & FLOAT    & Altitude plotted [m MSL]\\
%% \end{tabularx}
%% \caption{Parameters of a CH1903\_IMAGE product.}
%% \label{tab_product_ch1903_image}
%% \end{table}
%% The dimension and boundaries of the CH1903 image are set in the location configuration file (Sec.~\ref{subsec_location_config}).

%% \subsubsection{RHI\_IMAGE}
%% \label{subsec_rhi_image}

%%  RHI image of constant azimuth.

%% The parameters of a \emph{RHI\_IMAGE} product are listed in Table~\ref{tab_product_rhi_image}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{RHI\_IMAGE}.\\
%% anglenr        & INT        & Azimuth number (starting with 0) of the RHI image
%%                               to generate.\\
%% voltype        & STRING     & REQUIRED: A valid datatype string (i.e., KDP, KDPc, TYPE, dBZ\dots)\\
%% transparent    & INT        & OPTIONAL. It set to 1, the title, legend, frame and
%%                               all description is removed and the image background
%%                               is set to transparent. If not given or set to 0,
%%                               the image background is white.\\
%% NOSANITY       & INT        & If set to 1 and the sanity volume is available, the
%%                               sanity information (clutter, noise, melting layer) is
%%                               not added to the image.\\
%% \end{tabularx}
%% \caption{Parameters of a RHI\_IMAGE product.}
%% \label{tab_product_rhi_image}
%% \end{table}
%% The dimension and boundaries of the PPI image are set in the location configuration file (Sec.~\ref{subsec_location_config}.

%% \subsubsection{RHI\_PROFILE}
%% \label{subsec_rhi_profile}

%% Averaged height profile. The dataset is limited by the  \emph{rangeStart} and
%% \emph{rangeStop} parameters. For each radar gate the vertical height is calculated,
%% the heights are divided into height layers. For each height layer the median, the
%% 15\% and 75\% quantiles are calculated.

%% The product is a figure data value vs. altitude with median (blue) and the two
%% quantile curves (gray, dashed). Also a text file with the height profile is
%% generated. The height resolution in the text file is according the parameter
%% \emph{heightResolution}. In the image file the height resolution is always
%% 100~m. The height is given in meters above sea level.

%% The parameters of a \emph{RHI\_PROFILE} product are listed in Table~\ref{tab_product_rhi_profile}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{RHI\_PROFILE}.\\
%% anglenr        & INT        & Azimuth number (starting with 0) of the RHI image
%%                               to generate.\\
%% rangeStart     & FLOAT      & Minimal distance to the radar for the gates to be used for the
%%                               RHI\_PROFILE processing. Given in meters.\\
%% rangeStop      & FLOAT      & Maximal distance to the radar for the gates to be used for the
%%                               RHI\_PROFILE processing. Given in meters.\\
%% heightResolution & FLOAT    & Resolution of the height layers for the processing. Is only
%%                               applied to the text output file. The profile image height
%%                               resolution is fixed to 100~m.\\
%% \end{tabularx}
%% \caption{Parameters of a RHI\_PROFILE product.}
%% \label{tab_product_rhi_profile}
%% \end{table}

%% \subsubsection{CAPPI}
%% \label{subsec_cappi}

%% The parameters of a \emph{CAPPI} product are listed in Table~\ref{tab_product_cappi}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{CAPPI}.\\
%% altitude       & FLOAT      & Altitude of the CAPPI. In meters above see level.\\
%% transparent    & INT        & OPTIONAL. It set to 1, the title, legend, frame and
%%                               all description is removed and the image background
%%                               is set to transparent. If not given or set to 0,
%%                               the image background is white.\\
%% \end{tabularx}
%% \caption{Parameters of a CAPPI product.}
%% \label{tab_product_cappi}
%% \end{table}

%% \subsubsection{CAPPI\_ASCII}
%% \label{subsec_CAPPI_ASCII}
%% XXX to be described

%% \subsubsection{PLOT\_LINES}
%% \label{subsec_plot_lines}

%% Make a plot the data of the volume as a function of one polar volume
%% parameter (either range, azimuth or elevation) setting the other two
%% parameters to a fixed value.

%% The parameters of a \emph{PLOT\_LINES} product are listed in Table~\ref{tab_product_plot_lines}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{PLOT\_LINES}.\\
%% MODE           & STRING     & Mode of the line plotting. Either \emph{ALONG\_R}
%%                               for plotting the values along the range holding
%%                               the azimuth and elevation angles fixed or \emph{ALONG\_AZ}
%%                               or \emph{ALONG\_EL}.\\
%% FIX\_AZ\_ANGLES & FLTARR    & Value of the fixed azimuth angle in degree. Used in the
%%                               \emph{ALONG\_R} and \emph{ALONG\_EL} mode. If more
%%                               than one angle is given, more than one line is plotted.
%%                               Note that the necessary fixed parameters must have the same length.\\
%% FIX\_EL\_ANGLES & FLTARR    & Value of the fixed elevation angle in degree. Used in the
%%                               \emph{ALONG\_R} and \emph{ALONG\_AZ} mode.\\
%% FIX\_RANGES     & FLTARR    & Value of the fixed range in km. Used in the
%%                               \emph{ALONG\_EL} and \emph{ALONG\_AZ} mode.\\
%% START\_VALUE   & FLOAT      & [Optional] Start value of the running parameter. For mode
%%                               \emph{ALONG\_R} it is a range value in km, for \emph{ALONG\_AZ}
%%                               an azimuth angle in degree and for \emph{ALONG\_EL} an elevation
%%                               angle in degree. If not
%%                               set, the full available parameter range is plotted.\\
%% STOP\_VALUE    & FLOAT      & [Optional] End value of the running parameter.\\
%% COLORS         & STRARR     & [Optional] Color code for the lines. The first entry
%%                               defines the color of the first line. Format:
%%                               Hex code as string with two characters for blue, two for
%%                               green and two for red. Example: '0000ff' is red.\\
%% CFGINFO        & STRING     & Additional information about the product. This
%%                               string is appended to the output files.\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_LINES product.}
%% \label{tab_product_plot_lines}
%% \end{table}

%% \subsubsection{CDF\_STAT}
%% \label{subsec_cdf_stat}

%% Cumulative distribution function of the values within a dataset. The cdf is plotted
%% as image and the quantiles (10, 20, 30, 40, 50, 60, 70, 80, 90 and 95\%) are
%% written to a file.

%% Some outliers are removed before calculating the cdf.

%% The parameters of a \emph{CDF\_STAT} product are listed in Table~\ref{tab_product_cdf_stat}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{CDF\_STAT}.\\
%% CFGINFO        & STRING     & Additional information about the product. This
%%                               string is appended to the output files.\\
%% use\_nans      & INT        & If set to 1, all gate value with Nan are set
%%                               to the value given by the \emph{nan\_value} field.
%%                               If set to 0, the NaN gates are not used for the
%%                               cdf calculation.\\
%% nan\_value     & FLOAT      & The gates with NaN are set to this number. If
%%                               \emph{use\_nans} is set to zero, this parameter
%%                               is not used.\\
%% absolute       & INT        & If set to 1, the absolute value of the gate values
%%                               is taken and the cdf of the positive number is calculated.\\
%% sector         & STRUCT     & Structure defining the volume sector boundaries where the
%%                               gates are used the cdf calculation. This structure contains the
%%                               following 8 fields:\\
%% $\quad$ rangeStart& FLOAT   & Minimal distance from radar in meters.\\
%% $\quad$ rangeStop & FLOAT   & Maximal distance from radar in meters.\\
%% $\quad$ azStart   & FLOAT   & Start azimuth angle in degrees.\\
%% $\quad$ azStop    & FLOAT   & End azimuth angle in degrees.\\
%% $\quad$ elStart   & FLOAT   & Start elevation angle in degrees.\\
%% $\quad$ elStop    & FLOAT   & End elevation angle in degrees.\\
%% $\quad$ hmin      & FLOAT   & Minimal height above the radar in meters.\\
%% $\quad$ hmax      & FLOAT   & Maximal height above the radar in meters. If this value is negative,
%%                               the maximal height is the zero degree altitude (ISO0) read from the
%%                               COSMO analysis or forecast.\\
%% \end{tabularx}
%% \caption{Parameters of a CDF\_STAT product.}
%% \label{tab_product_cdf_stat}
%% \end{table}

%% \subsubsection{SAVEVOL}
%% \label{subsec_savevol}

%% Save the generated dataset volume as binary IDL file. The \emph{TRAJ\_SAVED} datasets
%% read the saved files and combine them with trajectory data.

%% The parameters of a \emph{SAVEVOL} product are listed in Table~\ref{tab_product_savevol}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}

%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{SAVEVOL}.\\
%% \end{tabularx}
%% \caption{Parameters of a SAVEVOL product.}
%% \label{tab_product_savevol}
%% \end{table}

%% \subsubsection{SAVESTATE}
%% \label{subsec_savestate}

%% Save the time of the processed volume. This is used for the realtime processing.
%% The time is written to the file defined by the config parameter \emph{lastStateFile}.

%% Use this product only for one dataset and only for the realtime processing.
%% Because the time is written the same file independently of the dataset. Thus, the previous
%% time can be easily overwritten if not paying attenuation.

%% The parameters of a \emph{SAVESTATE} product are listed in Table~\ref{tab_product_savestate}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{SAVESTATE}.\\
%% \end{tabularx}
%% \caption{Parameters of a SAVESTATE product.}
%% \label{tab_product_savestate}
%% \end{table}

%% \subsubsection{NETCDF\_CONV}
%% \label{subsec_netcdf_conv}

%% Conversion into single netcdf rhi or ppi slices.

%% The parameters of a \emph{NETCDF\_CONV} product are listed in
%% Table~\ref{tab_product_netcdf_conv}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{NETCDF\_CONV}.\\
%% \end{tabularx}
%% \caption{Parameters of a NETCDF\_CONV product.}
%% \label{tab_product_netcdf_conv}
%% \end{table}

%% \subsubsection{MELTLAYER\_IMAGE}
%% \label{subsec_meltlayer_image}
%% Azimuth-Height graphic indicating the density of points suspected to belong to the melting layer, the altitude of the ISO0 and the retrieved top and bottom of the melting layer.

%% \subsubsection{MELTLAYER\_TS}
%% \label{subsec_meltlayer_ts}
%% Time series plot with two subfigures. The top subfigure plots the evolution of the averaged (in azimuth) of the ISO0 and its standard deviation and the averaged (in azimuth) melting layer top and its standard deviation. The bottom subfigure plots the averaged (in azimuth) evolution of the melting layer thickness and its standard deviation.

%% \subsubsection{SAVE\_DEM}
%% \label{subsec_SAVE_DEM}

%% Save the PPI data of the given volume in a digital elevation model (DEM)
%% file format.

%% The parameters of a \emph{SAVE\_DEM} product are listed in
%% Table~\ref{tab_product_SAVE_DEM}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING   & Must be \emph{SAVE\_DEM}.\\
%% ANGLENR        & INT      & PPI selection from volume. Number of the PPI in the
%%                             volume.\\
%% XCOORDMIN      & FLOAT    & Specify the most West coordinates to be saved.
%%                             Must be the CH1903 coordinate in [m].\\
%% YCOORDMIN      & FLOAT    & Specify the most South coordinates to be saved.
%%                             Must be the CH1903 coordinate in [m].\\
%% XRESOLUTION    & FLOAT    & Resolution in meter to be saved.\\
%% NUM\_X\_SAMPLES & INT     & Number of samples in West-East direction.\\
%% NUM\_Y\_SAMPLES & INT     & Number of samples in South -North direction.\\
%% TITLE          & STRING   & Text to be added to the data file.\\
%% SET\_NANS       & INT     & If set to 1, the Nans are replaced by the value specified
%%                             by the config paramter NAN\_VALUE.\\
%% NAN\_VALUE      & FLOAT   & Value to set the nan values if SET\_NANS is set.\\
%% \end{tabularx}
%% \caption{Parameters of a SAVE\_DEM product.}
%% \label{tab_product_SAVE_DEM}
%% \end{table}

%% \subsubsection{RNGVSANG\_IMAGE}
%% \label{subsec_rngvsang}
%% Create and angle-range color plot for a particular elevation or azimuth given by anglenr according to the string FIXEDANGLE (AZIM or ELEV). If there is only one azimuth angle in the volume, it creates a profile. The function makes use of the structures rvsazImageConfig and rvselImageConfig defined in the location configuration file to set the limits of the plot.

%% \subsubsection{SAVESLICE\_PPI\_ASCII}
%% \label{subsec_SAVESLICE_PPI_ASCII}
%% XXX to be described

%% \subsubsection{CONST\_RANGE\_IMAGE}
%% \label{subsec_CONST_RANGE_IMAGE}

%% Make an azimuth vs. elevation image at given range.

%% The parameters of a \emph{CONST\_RANGE\_IMAGE} product are listed in
%% Table~\ref{tab_product_CONST_RANGE_IMAGE}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE            & STRING     & Must be \emph{CONST\_RANGE\_IMAGE}.\\
%% RANGE           & FLOAT      & [m] Distance from the radar to plot the image.
%%                                 The closests range bin is used.\\
%% \end{tabularx}
%% \caption{Parameters of a CONST\_RANGE\_IMAGE product.}
%% \label{tab_product_CONST_RANGE_IMAGE}
%% \end{table}

%% \subsubsection{CONTOUR\_RANGE\_IMAGE}
%% \label{subsec_CONTOUR_RANGE_IMAGE}

%% This product makes a 3D contour plot at a given rangegate.
%% The chosen datatype (e.g. dBuZ) is plotted by colorbar vs. azimuth and elevation angle.\\
%% To process data from spherecalibration measurement.\\

%% The parameters of a \emph{CONTOUR\_RANGE\_IMAGE} product are listed in
%% Table~\ref{tab_product_CONTOUR_RANGE_IMAGE}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING   & Must be \emph{CONTOUR\_RANGE\_IMAGE}.\\
%% RANGEGATE      & INT      & n-th range of volumescan, to select a fix range\\
%% \end{tabularx}
%% \caption{Parameters of a CONTOUR\_RANGE\_IMAGE product.}
%% \label{tab_product_CONTOUR_RANGE_IMAGE}
%% \end{table}


%% \subsubsection{CONTOUR\_RANGE\_IMAGE\_3D}
%% \label{subsec_CONTOUR_RANGE_IMAGE_3D}

%% This product makes a 3D contour plot at a given rangegate.
%% The chosen datatype (e.g. dBuZ) is plotted as a relief vs. azimuth and elevation angle.\\
%% To process data from spherecalibration measurement.\\

%% The parameters of a \emph{CONTOUR\_RANGE\_IMAGE\_3D} product are listed in
%% Table~\ref{tab_product_CONTOUR_RANGE_IMAGE_3D}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING   & Must be \emph{CONTOUR\_RANGE\_IMAGE\_3D}.\\
%% RANGEGATE      & INT      & n-th range of volumescan, to select a fix range\\
%% \end{tabularx}
%% \caption{Parameters of a CONTOUR\_RANGE\_IMAGE\_3D product.}
%% \label{tab_product_CONTOUR_RANGE_IMAGE_3D}
%% \end{table}

%% \subsubsection{WRITE\_BIN}
%% \label{subsec_WRITE_BIN}

%% Write the value of a volume to a file. Also the surrounding values are taken into
%% account for calculating the 3x3 and 5x5 area mean value. The maximum value is
%% in the box is found and its offset to the middle is written to the file.

%% The parameters of a \emph{WRITE\_BIN} product are listed in
%% Table~\ref{tab_product_WRITE_BIN}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING   & Must be \emph{WRITE\_BIN}.\\
%% BINS           & STRUCT   & Structure containing the bin definitions.
%%                             Each bin is defined by a structure inside this
%%                             structure itself. The name of the structure
%%                             is taken as name of the bin.\\
%% \quad <binname> & STRUCT   & Name of the bin. This structure contains the
%%                             following fields:\\
%% \quad AZ\_IND   & INT      & Azimuth index of the bin.\\
%% \quad EL\_IND   & INT      & Elevation index of the bin.\\
%% \quad R\_IND    & INT      & Range index of the bin.\\
%% \end{tabularx}
%% \caption{Parameters of a WRITE\_BIN.}
%% \label{tab_product_WRITE_BIN}
%% \end{table}

%% \subsubsection{WRITE\_MEAN}
%% \label{subsec_WRITE_MEAN}

%% Write the mean of a region inside a volume to a file. Also the median, standard
%% deviation, number of samples and number of valid (non-nan) samples are logged.

%% The parameters of a \emph{WRITE\_MEAN} product are listed in
%% Table~\ref{tab_product_WRITE_MEAN}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING   & Must be \emph{WRITE\_MEAN}.\\
%% REGIONS        & STRUCT   & Structure containing the region definitions.
%%                             Each region is defined by a structure inside this
%%                             structure itself. The name of the structure
%%                             is taken as name of the region.\\
%% \quad <regionname> & STRUCT & Name of the region. This structure contains the
%%                             following fields:\\
%% \quad AZMIN     & FLOAT    & Minimum azimuth angle [deg].\\
%% \quad AZMAX     & FLOAT    & Maximum azimuth angle [deg].\\
%% \quad ELMIN     & FLOAT    & Minimum elevation angle [deg].\\
%% \quad ELMAX     & FLOAT    & Maximum elevation angle [deg].\\
%% \quad RMIN      & FLOAT    & Minimum range [m].\\
%% \quad RMAX      & FLOAT    & Maximum range [m].\\
%% \quad SETNAN    & INT      & If set, replace the nans by the value defined
%%                              by <NANVALUE>.\\
%% \quad NANVALUE  & FLOAT    & Value to replace the nans (default: 0.0)\\
%% \end{tabularx}
%% \caption{Parameters of a WRITE\_MEAN.}
%% \label{tab_product_WRITE_MEAN}
%% \end{table}

%% \subsection{SUN\_MONITORING Products}

%% \subsubsection{PSUNHITS\_IMAGE}
%% \label{subsec_psunhits_image}
%% Creates a 2D plot where the x axis is the difference between radar azimuth and sun azimuth, the y axis is the difference between radar elevation and azimuth elevation and color coded is the estimated sun hit power [dBm]. The parameter "channel" controls which channel is plotted, either H or V.

%% \subsubsection{PSUNRETRIEVAL\_IMAGE}
%% \label{subsec_psunretrieval_image}
%% Creates a 2D plot where the x axis is the difference between radar azimuth and sun azimuth, the y axis is the difference between radar elevation and azimuth elevation and color coded is the retrieved sun power [dBm]. The parameter "channel" controls which channel is plotted, either H or V.

%% \subsubsection{ZDRSUNHITS\_IMAGE}
%% \label{subsec_zdrsunhits_image}
%% Creates a 2D plot where the x axis is the difference between radar azimuth and sun azimuth, the y axis is the difference between radar elevation and azimuth elevation and color coded is the estimated Zdr of the sun hit [dB].

%% \subsubsection{ZDRSUNRETRIEVAL\_IMAGE}
%% \label{subsec_zdrsunretrieval_image}
%% Creates a 2D plot where the x axis is the difference between radar azimuth and sun azimuth, the y axis is the difference between radar elevation and azimuth elevation and color coded is the retrieved Zdr of the sun [dB].

%% \subsubsection{SUNRETRIEVAL\_TS}
%% \label{subsec_sunretrieval_ts}
%% Plots a time series showing the evolution of a sun retrieval parameter in time. The parameter "parameter" is used to select the sun retrieval parameter. Table~\ref{tab_product_sunretrieval_ts} shows the selectable parameters.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{lX}
%% \bf{Parameter} &  \bf{Description}\\
%% Psunh           & retrieved horizontal channel sun power [dBm] and expected sun power according to DRAO measurements.\\
%% Psunv        & retrieved vertical channel sun power [dBm] and expected sun power according to DRAO measurements.\\
%% ZDRsun        & retrieved sun Zdr [dB] and target [0 dB].\\
%% elevbias        & elevation pointing bias [Deg] and target [0 Deg]\\
%% azimbias        & azimuth pointing bias [Deg] and target [0 Deg]\\
%% elevwidthh    & elevation beam width of the horizontal channel [Deg]\\
%% elevwidthv    & elevation beam width of the vertical channel [Deg]\\
%% azimwidthh    & azimuth beam width of the horizontal channel [Deg]\\
%% azimwidthv    & azimuth beam width of the vertical channel [Deg]\\
%% Psunh\_bias    & retrieved bias of the horizontal channel (respect to DRAO measurements) [dB] and target [0 dB]\\
%% Psunv\_bias    & retrieved bias of the vertical channel (respect to DRAO measurements) [dB] and target [0 dB]\\
%% \end{tabularx}
%% \caption{Plotable sun retrieval parameters}
%% \label{tab_product_sunretrieval_ts}
%% \end{table}

%% \subsection{RAY Products}

%% \subsubsection{POLAR\_AZ\_EL\_IMAGE}
%% \label{subsec_polar_az_el_image}

%% A polar azimuth elevation plot.

%% This product makes a 3D plot using the IDL built-in PLOT3D function.
%% This function uses a lot of memory.

%% The parameters of a \emph{POLAR\_AZ\_EL\_IMAGE} product are listed in
%% Table~\ref{tab_product_polar_az_el_image}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{POLAR\_AZ\_EL\_IMAGE}.\\
%% \end{tabularx}
%% \caption{Parameters of a POLAR\_AZ\_EL\_IMAGE product.}
%% \label{tab_product_polar_az_el_image}
%% \end{table}

%% \subsubsection{DISTANCE\_VS\_AZIMUTH\_IMAGE}
%% \label{subsec_distance_vs_azimuth_image}

%% Make a 2D ``data'' vs azimuth plot (y axis: ray data variable
%% (i.e.,  distance), x axis: azimuth

%% The parameters of a \emph{DISTANCE\_VS\_AZIMUTH\_IMAGE} product are listed
%% in Table~\ref{tab_product_distance_vs_azimuth_image}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE            & STRING     & Must be \emph{DISTANCE\_VS\_AZIMUTH\_IMAGE}.\\
%% MIN\_EL         & FLOAT      & Minimal elevation [degree].\\
%% MAX\_EL         & FLOAT      & Maximal elevation [degree].\\
%% MIN\_AZ         & FLOAT      & Minimal azimuth [degree].\\
%% MAX\_AZ         & FLOAT      & Maximal azimuth [degree].\\
%% \end{tabularx}
%% \caption{Parameters of a DISTANCE\_VS\_AZIMUTH\_IMAGE product.}
%% \label{tab_product_distance_vs_azimuth_image}
%% \end{table}


%% \subsubsection{QUANTILE\_STAT}
%% \label{subsec_quantile_stat}

%% Make ``data'' vs azimuth statistics. Results are written to a file.

%% The parameters of a \emph{QUANTILE\_STAT} product are listed
%% in Table~\ref{tab_product_quantile_stat}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE            & STRING     & Must be \emph{QUANTILE\_STAT}.\\
%% MIN\_EL         & FLOAT      & Minimal elevation [degree].\\
%% MAX\_EL         & FLOAT      & Maximal elevation [degree].\\
%% MIN\_AZ         & FLOAT      & Minimal azimuth [degree].\\
%% MAX\_AZ         & FLOAT      & Maximal azimuth [degree].\\
%% \end{tabularx}
%% \caption{Parameters of a QUANTILE\_STAT.}
%% \label{tab_product_quantile_stat}
%% \end{table}

%% \subsection{TIMESERIES Products}

%% \subsubsection{PLOT\_AND\_WRITE}
%% \label{subsec_plot_and_write}

%% A timeseries dataset is plotted and written to a file.

%% A time-value image is generated with the closest cell value (blue), the mean (read),
%% the minimum (gray, dashed) and the maximum (gray, dashed).

%% A text file (csv file) contains the same information as numbers. And an additional
%% column with the number of valid (non-NaN) values used at each time sample.

%% This product can only be applied to a timeseries dataset.

%% The parameters of a \emph{PLOT\_AND\_WRITE} product are listed in
%% Table~\ref{tab_product_plot_and_write}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{PLOT\_AND\_WRITE}.\\
%% ymin           & FLOAT      & OPTIONAL. If \emph{ymin} and \emph{ymax} are set,
%%                               the Y-axis of the timeseries plot is fixed to this
%%                               range. This does not influence the output text file.
%%                               If not set, the Y-range is selected automatically by
%%                               the range of the values to plot.\\
%% ymax           & FLOAT      & OPTIONAL. Set \emph{ymin} for explanation.\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_AND\_WRITE product.}
%% \label{tab_product_plot_and_write}
%% \end{table}

%% \subsubsection{PLOT\_AND\_WRITE\_POINT}
%% \label{subsec_plot_and_write_point}
%% A timeseries of data at a fixed point is plotted and written to a file. A time-value image is generated with the closest cell value to the point. A text file (csv file) contains the same information as numbers. This product can only be applied to a point\_measurement dataset.



%% \subsubsection{PLOT\_CUMULATIVE\_POINT}
%% \label{subsec_plot_cumulative_point}
%% A timeseries of accumulated data at a fixed point is plotted.

%% \subsubsection{COMPARE\_POINT}
%% \label{subsec_compare_point}
%% A plot is generated where data from the radar (in blue) and a sensor (in red) are plotted together. The list of accepted parameters for this product can be seen in Table~\ref{tab_product_COMPARE_POINT}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{COMPARE\_POINT}.\\
%% ymin           & FLOAT      & OPTIONAL. If \emph{ymin} and \emph{ymax} are set,
%%                               the Y-axis of the timeseries plot is fixed to this
%%                               range. This does not influence the output text file.
%%                               If not set, the Y-range is selected automatically by
%%                               the range of the values to plot.\\
%% ymax           & FLOAT      & OPTIONAL. Set \emph{ymin} for explanation.\\
%% sensor           & STRING      & disdro or rgage. The type of sensor that is compared with radar (disdrometer or rain gauge)\\
%% sensorid           & STRING      & the identifier of the sensor\\
%% elev           & STRING      & in the case of disdrometer an identifier of the elevation angle at which the scattering computations are performed (Ex 090= elevation 9 Deg)\\
%% temp       & STRING     & in the case of disdrometer an identifier of the temperature at which the scattering computations are performed (Ex 0100= temperature 10 Deg C)\\
%% \end{tabularx}
%% \caption{Parameters of a COMPARE\_POINT product.}
%% \label{tab_product_COMPARE_POINT}
%% \end{table}

%% \subsubsection{COMPARE\_CUMULATIVE\_POINT}
%% \label{subsec_compare_cumulative_point}
%% A plot is generated where accumulated data from the radar (in blue) and a sensor (in red) are plotted together. The list of accepted parameters for this product is the same as the one in Table~\ref{tab_product_COMPARE_POINT}.

%% \subsection{TIMEARRAY Products}

%% \subsubsection{TIME\_ARRAY\_IMAGE}
%% \label{subsec_time_array_image}

%% A time array matrix is plotted (to a file).

%% The parameters of a \emph{TIME\_ARRAY\_IMAGE} product are listed in
%% Table~\ref{tab_product_time_array_image}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{TIME\_ARRAY\_IMAGE}.\\
%% ADDWINDPROFILER & INT       & OPTIONAL. If set to 1, instead of the
%%                               time array matrix, data from a windprofiler
%%                               are read and plotted.\\
%% WP\_LOCATION   & STRING     & OPTIONAL. String specifying the windprofiler
%%                               AVS for Avanches, PAY for Payerne. Is only
%%                               used if ADDWINDPROFILER is set.\\
%% WP\_MODE       & STRING     & OPTIONAL. Specify the mode of the windprofiler
%%                               either HIGH of LOW. Is only used if
%%                               ADDWINDPROFILER is set.\\
%% MAKEDIFF       & INT        & OPTIONAL. If set calculates the difference
%%                               between the windprofiler data and the time
%%                               array matrix data. Is only used if
%%                               ADDWINDPROFILER is set.\\
%% RELDIFF        & INT        & OPTIONAL. If set calculates the relative difference
%%                               between the windprofiler and the time array
%%                               matrix data. Is only used if ADDWINDPROFILER
%%                               is set.\\
%% DORHIINTERPOLATION & INT    & OPTIONAL. If set, interpolate the data to a
%%                               equidistant Cartesian grid before
%%                               plotting. Used if y-axis values are not equidistant.
%%                               Only implemented for time-height products.\\
%% YMIN          & FLOAT       & Minimal altitude to plot the data [m].\\
%% YMAX          & FLOAT       & Maximal altitude to plot the data [m].\\
%% \end{tabularx}
%% \caption{Parameters of a TIME\_ARRAY\_IMAGE product.}
%% \label{tab_product_time_array_image}
%% \end{table}

%% \subsubsection{TIME\_ARRAY\_FILE}
%% \label{subsec_time_array_file}
%% XXX to be described

%% \subsection{TIMEARRAY\_ARRAY Products}

%% \subsubsection{TIME\_ARRAY\_IMAGE}
%% \label{subsec_time_array_array_image}
%% A TIME\_ARRAY\_IMAGE can be generated also for TIMEARRAY\_ARRAY datasets. The general parametrization of this product are given in Table~\ref{tab_product_time_array_image}. In case of TIMEARRAY\_ARRAY datasets the additional parameters are listed in Table~\ref{tab_product_time_array_array_image}.


%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%    Statistic  & FLOAT & It defines which statistics (given its availability into the dataset will be displayed. The statistics are coded as defined in Table~\ref{tab_dataset_time_summary_height}.\\
%% \end{tabularx}
%% \caption{Parameters of a TIME\_ARRAY\_IMAGE product for a TIMEARRAY\_ARRAY dataset. All the parameters of Table~\ref{tab_product_time_array_image} can be used as well}
%% \label{tab_product_time_array_array_image}
%% \end{table}

%% When a TIME\_ARRAY\_IMAGE product is generated for a TIME\_SUMMARY\_HEIGHT dataset, by default the average DEM level and eventual hail reports are overplotted, if this information was available in the dataset.

%% \subsubsection{TIME\_ARRAY\_MAP}
%% \label{subsec_time_array_map}

%% This product is used to display a time-height vector and its trajectory on a map by means of a 3D or 2D projection. DEM data and/or hail reports can be overlayed, if available.
%% This product is of particular interest to display the trajectory and vertical development of storm cells.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%  domain\_3d   & STRUCT     & Structure containing the [x,y,z] dimension in km
%%                                of the area to be plotted (with respect to the radar
%%                                position as 0,0,0). The entries of the structure are:
%%                                 xmin, xmax, ymin,ymax, zmin,zmax. Default values are -50,
%%                                  50, -50, 50, 0, 15 km.\\
%% demfile       & STRING & If set, a file containing the Digital Elevation Model
%%                                 (in IDRISI Raster A.1 format) to be overlayed.\\
%%     path\_hail\_crowd   & STRING & If set, the path to hail crowd sourcing reports,
%%                                  to be overlayed with yellow stars on the base
%%                                  of the image. NOTE:
%%                                  this is pilot.
%%                                 At the current revision (0.5.2), those data are found
%%                                 on the zueub222 server on $/data/lom/WOL/hail/HPX/$.\\
%%       Statistic  & FLOAT & It defines which statistics (given its availability into the dataset will be displayed. The statistics are coded as defined in Table~\ref{tab_dataset_time_summary_height}.\\
%%    MAPPLOTTYPE & STRING & Either '2D' (default) or '3D'. It defines if a 3D plot or 2D projections are required.\\
%%    coordsystem & STRING & In development: now only 'CH1903' is accepted (default).\\
%% \end{tabularx}
%% \caption{Parameters of a TIME\_ARRAY\_MAP product.}
%% \label{tab_product_time_array_map}
%% \end{table}

%% \subsection{TRAJ\_ONLY Products}

%% \subsubsection{TRAJ\_PLOT}
%% \label{subsec_traj_plot}

%% Plot a timeseries of a plane trajectory in radar coordinates.

%% This product uses only the trajectory and no radar data.

%% This product can only be applied to a trajectory dataset.

%% The parameters of a \emph{TRAJ\_PLOT} product are listed in
%% Table~\ref{tab_product_traj_plot}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{TRAJ\_PLOT}.\\
%% datatype       & STRING     & Specify the type of the trajectory timeseries.
%%                               \emph{RANGE} for a timeseries of the range to the radar,
%%                               \emph{EL} for a elevation timeseries and \emph{AZ} for an
%%                               azimuth timeseries.\\
%% \end{tabularx}
%% \caption{Parameters of a TRAJ\_PLOT product.}
%% \label{tab_product_traj_plot}
%% \end{table}

%% \subsubsection{TRAJ\_TEXT}
%% \label{subsec_traj_text}

%% Write the range, azimuth and elevation timeseries of a plane
%% trajectory to a text file.

%% This product uses only the trajectory and no radar data.

%% This product can only be applied to a trajectory dataset.

%% The parameters of a \emph{TRAJ\_TEXT} product are listed in
%% Table~\ref{tab_product_traj_text}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{TRAJ\_TEXT}.\\
%% \end{tabularx}
%% \caption{Parameters of a TRAJ\_TEXT product.}
%% \label{tab_product_traj_text}
%% \end{table}

%% \subsubsection{TRAJ\_ANTENNA}
%% \label{subsec_traj_antenna}

%% Plot the movements of the radar antenna. A text file with the azimuth and
%% elevation position as function of time is generated and two
%% plots (one for the azimuth, the other for the elevation movement of the
%% radar antenna).

%% The parameters of a \emph{TRAJ\_ANTENNA} product are listed in
%% Table~\ref{tab_product_traj_antenna}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE            & STRING     & Must be \emph{TRAJ\_ANTENNA}.\\
%% TIME\_OFFSET    & FLOAT      & Time offset in seconds.\\
%% \end{tabularx}
%% \caption{Parameters of a TRAJ\_ANTENNA product.}
%% \label{tab_product_traj_antenna}
%% \end{table}


%% \subsubsection{TRAJ\_DX50\_ANTENNA\_HITS}
%% \label{subsec_traj_dx50_antenna_hits}

%% Compare the DX50 antenna movement with a plane trajectory. Possible
%% hits (when the DX50 measured in the direction where the plane was)
%% are listed.

%% This product can only be applied to a trajectory dataset.

%% The parameters of a \emph{TRAJ\_DX50\_ANTENNA\_HITS} product are
%% listed in Table~\ref{tab_product_traj_dx50_antenna_hits}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{TRAJ\_DX50\_ANTENNA\_HITS}.\\
%% time\_off      & FLOAT      & Time shift in seconds. The antenna movement
%%                               time series is shifted by this time period.\\
%% az\_tol        & FLOAT      & Azimuth tolerance in degrees. For a hit with
%%                               the plane trajectory, the absolute difference
%%                               between antenna and plane azimuth must be
%%                               smaller than this value.\\
%% el\_tol        & FLOAT      & Elevation tolerance in degrees. For a hit with
%%                               the plane trajectory, the absolute difference
%%                               between antenna and plane elevation must be
%%                               smaller than this value.\\
%% time\_tol      & FLOAT      & Time tolerance in seconds. For a hit with
%%                               the plane trajectory, the absolute difference
%%                               between antenna and plane time must be
%%                               smaller than this value.\\
%% \end{tabularx}
%% \caption{Parameters of a TRAJ\_DX50\_ANTENNA\_HITS product.}
%% \label{tab_product_traj_dx50_antenna_hits}
%% \end{table}

%% \subsection{TRAJ\_VOL\_COMPOSITE Products}

%% \subsubsection{RHI\_TRAJ}
%% \label{subsec_rhi_traj}

%% Overplot the trajectory over a RHI image with azimuth according to the planes
%% azimuth angle.

%% This product can only be applied to a trajectory dataset.

%% The parameters of a \emph{RHI\_TRAJ} product are listed in Table~\ref{tab_product_rhi_traj}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{RHI\_TRAJ}.\\
%% \end{tabularx}
%% \caption{Parameters of a RHI\_TRAJ product.}
%% \label{tab_product_rhi_traj}
%% \end{table}

%% \subsubsection{PPI\_TRAJ}
%% \label{subsec_ppi_traj}

%% Overplot the trajectory over a PPI image with elevation according to the planes
%% elevation angle.

%% This product can only be applied to a trajectory dataset.

%% The parameters of a \emph{PPI\_TRAJ} product are listed in Table~\ref{tab_product_ppi_traj}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{PPI\_TRAJ}.\\
%% \end{tabularx}
%% \caption{Parameters of a PPI\_TRAJ product.}
%% \label{tab_product_ppi_traj}
%% \end{table}


%% \subsection{PSR Products}

%% \subsubsection{SPECTRUM\_IMAGE}
%% \label{subsec_spectrum_image}
%% Plots a single spectrum image. The parameters of a \emph{SPECTRUM\_IMAGE} product are listed in Table~\ref{tab_product_spectrum_image}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE        & STRING   & Must be \emph{SPECTRUM\_IMAGE}.\\
%% range       & FLOAT    & The range of the spectrum [m].\\
%% elev        & FLOAT    & The elevation of the spectrum [deg].\\
%% azim        & FLOAT    & The azimuth of the spectrum [deg].\\
%% \end{tabularx}
%% \caption{Parameters of a SPECTRUM\_IMAGE product.}
%% \label{tab_product_spectrum_image}
%% \end{table}


%% \subsubsection{VERTICAL\_SPECTRUM\_IMAGE}
%% \label{subsec_VERTICAL_SPECTRUM_IMAGE}
%% XXX to be described

%% \subsubsection{SINGLE\_SPECTRUM\_IMAGE}
%% \label{subsec_SINGLE_SPECTRUM_IMAGE}
%% XXX to be described

%% \subsubsection{SAVE\_PSR\_VOLUME}
%% \label{subsec_SAVE_PSR_VOLUME}
%% XXX to be described

%% \subsubsection{SPEC\_ALONG}
%% \label{subsec_SPEC_ALONG}

%% Plot a spectrum along a fixed range, elevation or azimuth.

%% This product can only be applied to a PSR dataset.

%% The parameters of a \emph{SPEC\_ALONG} product are listed in Table~\ref{tab_product_SPEC_ALONG}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{SPEC\_ALONG}.\\
%% MODE           & STRING     & Mode of the line plotting. Either \emph{ALONG\_R}
%%                               for plotting the values along the range holding
%%                               the azimuth and elevation angles fixed or \emph{ALONG\_AZ}
%%                               or \emph{ALONG\_EL}.\\
%% FIX\_AZ\_ANGLES & FLTARR    & Value of the fixed azimuth angle in degree. Used in the
%%                               \emph{ALONG\_R} and \emph{ALONG\_EL} mode.\\
%% FIX\_EL\_ANGLES & FLTARR    & Value of the fixed elevation angle in degree. Used in the
%%                               \emph{ALONG\_R} and \emph{ALONG\_AZ} mode.\\
%% FIX\_RANGES     & FLTARR    & Value of the fixed range in km. Used in the
%%                               \emph{ALONG\_EL} and \emph{ALONG\_AZ} mode.\\
%% START\_VALUE   & FLOAT      & [Optional] Start value of the running parameter. For mode
%%                               \emph{ALONG\_R} it is a range value in km, for \emph{ALONG\_AZ}
%%                               an azimuth angle in degree and for \emph{ALONG\_EL} an elevation
%%                               angle in degree. If not
%%                               set, the full available parameter range is plotted.\\
%% STOP\_VALUE    & FLOAT      & [Optional] End value of the running parameter.\\
%% CFGINFO        & STRING     & Additional information about the product. This
%%                               string is appended to the output files.\\
%% \end{tabularx}
%% \caption{Parameters of a SPEC\_ALONG product.}
%% \label{tab_product_SPEC_ALONG}
%% \end{table}


%% \subsubsection{IQ\_ALONG}
%% \label{subsec_iq_along}

%% Plots IQ data along a fixed range, elevation or azimuth. The parameters of a \emph{IQ\_ALONG} product are listed in Table~\ref{tab_product_iq_along}.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%% TYPE           & STRING     & Must be \emph{SPEC\_ALONG}.\\
%% MODE           & STRING     & Mode of the line plotting. Either \emph{ALONG\_R}
%%                               for plotting the values along the range holding
%%                               the azimuth and elevation angles fixed or \emph{ALONG\_AZ}
%%                               or \emph{ALONG\_EL}.\\
%% FIX\_AZ\_ANGLES & FLTARR    & Value of the fixed azimuth angle in degree. Used in the
%%                               \emph{ALONG\_R} and \emph{ALONG\_EL} mode.\\
%% FIX\_EL\_ANGLES & FLTARR    & Value of the fixed elevation angle in degree. Used in the
%%                               \emph{ALONG\_R} and \emph{ALONG\_AZ} mode.\\
%% FIX\_RANGES     & FLTARR    & Value of the fixed range in km. Used in the
%%                               \emph{ALONG\_EL} and \emph{ALONG\_AZ} mode.\\
%% START\_VALUE   & FLOAT      & [Optional] Start value of the running parameter. For mode
%%                               \emph{ALONG\_R} it is a range value in km, for \emph{ALONG\_AZ}
%%                               an azimuth angle in degree and for \emph{ALONG\_EL} an elevation
%%                               angle in degree. If not
%%                               set, the full available parameter range is plotted.\\
%% STOP\_VALUE    & FLOAT      & [Optional] End value of the running parameter.\\
%% CFGINFO        & STRING     & Additional information about the product. This
%%                               string is appended to the output files.\\
%% \end{tabularx}
%% \caption{Parameters of a IQ\_ALONG product.}
%% \label{tab_product_iq_along}
%% \end{table}


%% \subsection{MONITORING Products}

%% \subsubsection{WRITE\_PHIDP0}
%% \label{subsec_WRITE_PHIDP0}
%% Writes the Phidp offset monitoring information in a .dat file. The file contains a text header with meta data on the monitoring and a set of binary fields with the actual monitoring data.

%% \subsubsection{WRITE\_ZDRBIAS}
%% \label{subsec_WRITE_ZDRBIAS}
%% Writes the Zdr in moderate rain information in a .dat file. The file contains a text header with meta data on the monitoring and a set of binary fields with the actual monitoring data.

%% \subsubsection{WRITE\_RHOAV}
%% \label{subsec_WRITE_RHOAV}
%% Writes the Rhohv in rain information in a .dat file. The file contains a text header with meta data on the monitoring and a set of binary fields with the actual monitoring data.

%% \subsubsection{WRITE\_ZHBIAS}
%% \label{subsec_WRITE_ZHBIAS}
%% Writes the Zh bias information in a .dat file. The file contains a text header with meta data on the monitoring and a set of binary fields with the actual monitoring data.

%% \subsubsection{PLOT\_PHIDP0}
%% \label{subsec_PLOT_PHIDP0}
%% Plots the phidp offset as a function of azimuth for a particular elevation given by anglenr.


%% \subsubsection{PLOT\_ZDRBIAS}
%% \label{subsec_PLOT_ZDRBIAS}
%% Plots the Zdr in moderate rain as a function of azimuth for a particular elevation given by anglenr.

%% \subsubsection{PLOT\_ZHBIAS}
%% \label{subsec_PLOT_ZHBIAS}
%% Plots the Zh bias in moderate rain as a function of azimuth for a particular elevation given by anglenr.

%% \subsubsection{PLOT\_PHIDP0\_DAY\_TS}
%% \label{subsec_PLOT_PHIDP0_DAY_TS}
%% Plots the evolution of the phidp offset within a day.

%% \subsubsection{PLOT\_ZDRBIAS\_DAY\_TS}
%% \label{subsec_PLOT_ZDRBIAS_DAY_TS}
%% Plots the evolution of the Zdr in moderate rain within a day.

%% \subsubsection{PLOT\_RHOAV\_DAY\_TS}
%% \label{subsec_PLOT_RHOAV_DAY_TS}
%% Plots the evolution of the Rhohv in rain within a day.

%% \subsubsection{PLOT\_ZHBIAS\_DAY\_TS}
%% \label{subsec_PLOT_ZHBIAS_DAY_TS}
%% Plots the evolution of the Zh bias within a day.

%% \subsubsection{PLOT\_AND\_WRITE\_PHIDP0\_TS}
%% \label{subsec_PLOT_AND_WRITE_PHIDP0_TS}
%% Writes the results of the last phidp offset monitoring (date, number of valid points and value) in a new row of a text file and plots its evolution as a function of time. If the current value deviates significantly from the previous ones an alarm may be sent via mail to specified users.  Table~\ref{tab_product_PLOT_AND_WRITE_PHIDP0_TS} lists the options for this product.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE           & STRING     & Must be \emph{PLOT\_AND\_WRITE\_PHIDP0\_TS}.\\
%%   setalarm     & INT        & Boolean: 0, 1. Default 0. If set to 1 the latest monitoring value is examined to see whether it agrees with the trend. If it does not agree a text file containing the analysis is written\\
%%   sendemail     & INT        & Boolean: 0, 1. Default 0. If set to 1 and an alarm text is generated, the text is send via email.\\
%%   mail\_addresses     & STRING        & a string with the email addresses where to send an alarm separated by comas.\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_AND\_WRITE\_PHIDP0\_TS product.}
%% \label{tab_product_PLOT_AND_WRITE_PHIDP0_TS}
%% \end{table}


%% \subsubsection{PLOT\_AND\_WRITE\_ZDRBIAS\_TS}
%% \label{subsec_PLOT_AND_WRITE_ZDRBIAS_TS}
%% Writes the results of the last Zdr in moderate rain monitoring (date, number of valid points and value) in a new row of a text file and plots its evolution as a function of time. If the current value deviates significantly from the previous ones or it is outside of the expected margins an alarm may be sent via mail to specified users.  Table ~\ref{tab_product_PLOT_AND_WRITE_ZDRBIAS_TS} lists the options for this product.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE           & STRING     & Must be \emph{PLOT\_AND\_WRITE\_ZDRBIAS\_TS}.\\
%%   setalarm     & INT        & Boolean: 0, 1. Default 0. If set to 1 the latest monitoring value is examined to see whether it agrees with the trend. If it does not agree a text file containing the analysis is written\\
%%   sendemail     & INT        & Boolean: 0, 1. Default 0. If set to 1 and an alarm text is generated, the text is send via email\\
%%   mail\_addresses     & STRING        & a string with the email addresses where to send an alarm separated by comas.\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_AND\_WRITE\_ZDRBIAS\_TS product.}
%% \label{tab_product_PLOT_AND_WRITE_ZDRBIAS_TS}
%% \end{table}


%% \subsubsection{PLOT\_AND\_WRITE\_RHOAV\_TS}
%% \label{subsec_PLOT_AND_WRITE_RHOAV_TS}
%% Writes the results of the last monitoring of rhohv in rain (date, number of valid points and value) in a new row of a text file and plots its evolution as a function of time. If the current value deviates significantly from the previous ones or it is outside of the expected margins an alarm may be sent via mail to specified users.  Table ~\ref{tab_product_PLOT_AND_WRITE_RHOAV_TS} lists the options for this product.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE           & STRING     & Must be \emph{PLOT\_AND\_WRITE\_RHOAV\_TS}.\\
%%   setalarm     & INT        & Boolean: 0, 1. Default 0. If set to 1 the latest monitoring value is examined to see whether it agrees with the trend. If it does not agree a text file containing the analysis is written\\
%%   sendemail     & INT        & Boolean: 0, 1. Default 0. If set to 1 and an alarm text is generated, the text is send via email\\
%%   mail\_addresses     & STRING        & a string with the email addresses where to send an alarm separated by comas.\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_AND\_WRITE\_RHOAV\_TS product.}
%% \label{tab_product_PLOT_AND_WRITE_RHOAV_TS}
%% \end{table}

%% \subsubsection{PLOT\_AND\_WRITE\_ZHBIAS\_TS}
%% \label{subsec_PLOT_AND_WRITE_ZHBIAS_TS}
%% Writes the results of the last Zh calibration monitoring monitoring (date, number of valid points and value) in a new row of a text file and plots its evolution as a function of time. If the current value deviates significantly from the previous ones or it is outside of the expected margins an alarm may be sent via mail to specified users.  Table ~\ref{tab_product_PLOT_AND_WRITE_ZHBIAS_TS} lists the options for this product.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE           & STRING     & Must be \emph{PLOT\_AND\_WRITE\_ZHBIAS\_TS}.\\
%%   setalarm     & INT        & Boolean: 0, 1. Default 0. If set to 1 the latest monitoring value is examined to see whether it agrees with the trend. If it does not agree a text file containing the analysis is written\\
%%   sendemail     & INT        & Boolean: 0, 1. Default 0. If set to 1 and an alarm text is generated, the text is send via email\\
%%   mail\_addresses     & STRING        & a string with the email addresses where to send an alarm separated by comas.\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_AND\_WRITE\_ZHBIAS\_TS product.}
%% \label{tab_product_PLOT_AND_WRITE_ZHBIAS_TS}
%% \end{table}

%% \subsection{XVSC products}
%% \subsubsection{PLOT\_INTERCOMP}
%% \label{subsec_products_PLOT_INTERCOMP}
%% Plots a scatter plot with the intercomparison between the master radar and a slave radar and computes various statistics. The points in the scatter plot are averaged reflectivity. It can be plotted for a particular elevation or for all the elevations of the master radar. Table ~\ref{tab_product_PLOT_INTERCOMP} lists the options for this product.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE           & STRING     & Must be \emph{PLOT\_INTERCOMP}.\\
%%   radar     & STRING        & Slave radar that is compared.\\
%%   radarres     & STRING        & resolution of slave radar (H or L).\\
%%   anglenr    & INT & Index of the elevation angle compared. If -1 all elevations of the master radar are used.\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_INTERCOMP product.}
%% \label{tab_product_PLOT_INTERCOMP}
%% \end{table}


%% \subsubsection{PLOT\_AND\_WRITE\_INTERCOMP\_TS}
%% \label{subsec_products_PLOT_AND_WRITE_INTERCOMP_TS}
%% Writes the results of the last inter-comparison (time, number of points, mode bias, median bias, mean bias, correlation and slope and intercept) in a new row in a text file. Plots the evolution of the median bias. Table ~\ref{tab_product_PLOT_AND_WRITE_INTERCOMP_TS} lists the options for this product.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE           & STRING     & Must be \emph{PLOT\_AND\_WRITE\_INTERCOMP\_TS}.\\
%%   radar     & STRING        & Slave radar that is compared.\\
%%   radarres     & STRING        & resolution of slave radar (H or L).\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_AND\_WRITE\_INTERCOMP\_TS product.}
%% \label{tab_product_PLOT_AND_WRITE_INTERCOMP_TS}
%% \end{table}


%% \subsection{INTERCOMP products}
%% \subsubsection{PLOT\_INTERCOMP}
%% \label{subsec_products_PLOT_INTERCOMP2}
%% Plots a scatter plot with the intercomparison between the master radar and a slave radar for a particular polarimetric variable and computes various statistics. It can be plotted for a particular elevation or for all the elevations of the master radar. Table ~\ref{tab_product_PLOT_INTERCOMP2} lists the options for this product.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE           & STRING     & Must be \emph{PLOT\_INTERCOMP}.\\
%%   radar     & STRING        & Slave radar that is compared.\\
%%   radarres     & STRING        & resolution of slave radar (H or L).\\
%%   anglenr    & INT & Index of the elevation angle compared. If -1 all elevations of the master radar are used.\\
%% \end{tabularx}
%% \caption{Parameters of a PLOT\_INTERCOMP product.}
%% \label{tab_product_PLOT_INTERCOMP2}
%% \end{table}


%% \subsection{HISTOGRAM products}
%% \subsubsection{WRITE\_2DHIST}
%% \label{subsec_products_WRITE_2DHIST}
%% Writes a 2D histogram in a .dat file consisting of a text header with metadata and a binary part with the histogram proper.

%% \subsubsection{PLOT\_2DHIST}
%% \label{subsec_products_PLOT_2DHIST}
%% Plots the 2D histogram for a particular angle given by the parameter anglenr. Additionally it computes the 10-, 50- and 90-quantiles and plots them also in a different figure. The quantile information (together with the number of samples is also given in a .csv file.

%% \subsubsection{WRITE\_HIST}
%% \label{subsec_products_WRITE_HIST}
%% Writes a 1D histogram in a .dat file consisting of a text header with metadata and a binary part with the histogram proper.

%% \subsubsection{PLOT\_HIST}
%% \label{subsec_products_PLOT_HIST}
%% Plots the 1D histogram for a particular angle given by the parameter anglenr. Statistical data such as mode, mean, median 80-quantile and number of points are also computed.

%% \subsection{COMPOSITE\_VOLUME products}

%% \subsubsection{PPI\_RHI\_IMAGE}
%%   \label{subsec_ppi_rhi_image}
%%    It is used to display on the same image PPI (1X) and RHI (max 3X) Cartesian plots. On the PPI panel it is drawn the RHI(s)' azimuths while on the RHI panels it is drawn the PPI elevation. Table ~\ref{tab_product_PPI_RHI_IMAGE} lists the options for this product.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE           & STRING     & Must be \emph{PPI\_RHI\_IMAGE}.\\
%%   ppianglenr     & INT        & Index of the PPI angle in the PPI volume of the composite. Default 0.\\
%%   rhianglenr     & INT/INTARR & Indexes (up to 3) of the RHI angle in the RHI volume of the composite. Default 0.\\
%% \end{tabularx}
%% \caption{Parameters of a PPI\_RHI\_IMAGE product.}
%% \label{tab_product_PPI_RHI_IMAGE}
%% \end{table}

%% Additionally, the boundaries and dimensions for PPI and RHI plots are set in the location configuration file (~\ref{subsec_location_config}).


%% \subsubsection{CELL\_3D\_IMAGE}
%%   \label{subsec_cell_3d_image}
%%   This product is designed mainly for storm-tracking protocols. A simple identification procedure is used to select the ``interesting'' part of the scanning volume to plot (i.e., the storm cell), then only this part is plotted. The reference system is therefore cell-centered. The plot itself is a 3D scatterplot of radar data with or without a DEM overlayed. The identification is designed to work only on reflectivity data. Nevertheless, the cell can be identified by means of reflectivity, its location can be saved and loaded on occurrence for other variables.

%% \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE          & STRING     & Must be \emph{CELL\_3D\_IMAGE}.\\
%%   ppianglenr     & INT        & Index of the PPI angle in the PPI volume of the composite. Default 0.\\
%%   rhianglenr     & INT/INTARR & Indexes (up to 3) of the RHI angle in the RHI volume of the composite. Default 0.\\
%%   boxsize\_3d   & FLTARR     & Vector containing the [x,y,z] dimension in km
%%                                of the area to be plotted. Default $[25,25,14]$.\\
%%   nr\_newnorth  & INT        & Index of the RHI angle number that is supposed
%%                               to cross the storm cell in its pseudo-center
%%                                (usually 1 for storm tracking). If set to -1 (default)
%%                                 then the angle is not considered. All the polar data
%%                                  will be rotated in a way that the new y axis of
%%                                  the reference system will coincide with the d
%%                                  irection of nr\_newnorth.\\
%%   cell\_savepath & STRING &  If set, path where to save the information about the radial
%%                             distance between the radar and the beginning of
%%                              boxsize\_3d, matched to bound the storm cell.
%%                              Use this with reflectivity, and then use
%%                              cell\_loadpath if other variables are needed.\\

%%    cell\_loadpath & STRING &  If set, path where to load the information saved by
%%                               cell\_savepath. To be used if cell\_savepath has been
%%                               already applied on reflectivity and the current VOL
%%                                dataset is other than reflectivity.\\
%%    n\_views       & INT    &  How many 3D views of the cell to display (1-4).
%%                                 Default is 1.\\
%%     zh\_levelcell & FLOAT  & The reflectivity level below which the data are
%%                              not considered for cell-identification.
%%                              Default is 30 dBZ.\\
%%     demfile       & STRING & If set, a file containing the Digital Elevation Model
%%                                 (in IDRISI Raster A.1 format).\\
%% \end{tabularx}
%% \caption{Parameters of a CELL\_3D\_IMAGE product.}
%% \label{tab_product_CELL_3D_IMAGE}
%% \end{table}

%% \subsubsection{RADAR\_3D\_IMAGE}
%%   \label{subsec_radar_3d_image}

%%    A radar 3D image is a 3D scatterplot of radar data plotted in the CH1903 coordinate reference syste or in the radar-centered reference system (as a PPI image for instance). A DEM can be overlayed as well as some single point data.

%%  \begin{table}[H]
%% \rowcolors{1}{darkgray}{lightgray}
%% \begin{tabularx}{\textwidth}{llX}
%% \bf{Parameter}  & \bf{Type}  & \bf{Description}\\
%%   TYPE          & STRING     & Must be \emph{RADAR\_3D\_IMAGE}.\\
%%   ppianglenr     & INT        & Index of the PPI angle in the PPI volume of the composite. Default 0.\\
%%   rhianglenr     & INT/INTARR & Indexes (up to 3) of the RHI angle in the RHI volume of the composite. Default 0.\\
%%    n\_views     & INT    &  How many 3D views of the cell to display (1-4).
%%                                 Default and suggested is 1.\\
%%     ch\_coords  & INT  &   Boolean. If 1, work in CH1903 coordinates system.
%%                            Default 1.\\
%%                             domain\_3d   & STRUCT     & Structure containing the [x,y,z] dimension in km
%%                                of the area to be plotted (with respect to the radar
%%                                position that is 0,0,0). The entries of the structure are:
%%                                 xmin, xmax, ymin,ymax, zmin,zmax. Default values are -50,
%%                                  50, -50, 50, 0, 15 km.\\
%%     demfile       & STRING & If set, a file containing the Digital Elevation Model
%%                                 (in IDRISI Raster A.1 format) to be overlayed.\\
%%     min\_varlevel & FLOAT & Values lower than min\_varlevel will not be displayed.
%%                             Default is -999.\\
%%     path\_hail\_crowd   & STRING & If set, the path to hail crowd sourcing reports,
%%                                  to be overlayed with yellow stars on the base
%%                                  of the image. NOTE:
%%                                  this is pilot.
%%                                 At the current revision (0.4.5), those data are found
%%                                 on the zueub222 server on $/data/lom/WOL/hail/HPX/$.\\
%%      hail\_deltat    & INT  &   Set it to the number of secods of
%%      tolerance to match a hail report with a radar image (default is  300, i.e. $\pm$                                                          5 minutes).\\
%% \end{tabularx}
%% \caption{Parameters of a RADAR\_3D\_IMAGE product.}
%% \label{tab_product_RADAR_3D_IMAGE}
%% \end{table}


\newpage

% ----------------------------------------------------------------------------
% Configuration File Format
% ----------------------------------------------------------------------------
%\section{Configuration File Format}
%\label{sec_file_format}

% XXX to be done

% ----------------------------------------------------------------------------
% Common Error Messages
% ----------------------------------------------------------------------------
%\section{Common Error Messages}

% XXX to be done

\end{document}
